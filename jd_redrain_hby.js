/*
京豆红包雨

cron:1 1 1 1 * jd_redrain_hby.js

*/

const $ = new Env('京豆红包雨');
var iｉl='jsjiami.com.v7';const Ilil11=iii1II;(function(II111,lI1l1I,lill11,liI1i1,I11i11,I1llII,Iil1il){return II111=II111>>0x6,I1llII='hs',Iil1il='hs',function(I11i1i,l1l1iI,I1llI1,I11i1l,il1il){const Ii1ii1=iii1II;I11i1l='tfi',I1llII=I11i1l+I1llII,il1il='up',Iil1il+=il1il,I1llII=I1llI1(I1llII),Iil1il=I1llI1(Iil1il),I1llI1=0x0;const Il1i1i=I11i1i();while(!![]&&--liI1i1+l1l1iI){try{I11i1l=parseInt(Ii1ii1(0x182,'*2ca'))/0x1+-parseInt(Ii1ii1(0x19b,'o%R^'))/0x2+-parseInt(Ii1ii1(0x1df,'LNtj'))/0x3*(-parseInt(Ii1ii1(0x1a7,'sjFm'))/0x4)+-parseInt(Ii1ii1(0x22f,'s$41'))/0x5*(-parseInt(Ii1ii1(0x212,'t5QH'))/0x6)+-parseInt(Ii1ii1(0x1d3,'p#[V'))/0x7*(parseInt(Ii1ii1(0x1e1,'4!Ct'))/0x8)+-parseInt(Ii1ii1(0x19c,'*q$q'))/0x9*(-parseInt(Ii1ii1(0x17c,'3@Ju'))/0xa)+parseInt(Ii1ii1(0x209,'zWCB'))/0xb*(parseInt(Ii1ii1(0x25b,'t5QH'))/0xc);}catch(iIIili){I11i1l=I1llI1;}finally{il1il=Il1i1i[I1llII]();if(II111<=liI1i1)I1llI1?I11i11?I11i1l=il1il:I11i11=il1il:I1llI1=il1il;else{if(I1llI1==I11i11['replace'](/[TQekJghxIAdyRXrESK=]/g,'')){if(I11i1l===l1l1iI){Il1i1i['un'+I1llII](il1il);break;}Il1i1i[Iil1il](il1il);}}}}}(lill11,lI1l1I,function(Ii1iiI,Ilil1I,iliIiI,II11iI,Il1i1l,Iil1ii,lill1I){return Ilil1I='\x73\x70\x6c\x69\x74',Ii1iiI=arguments[0x0],Ii1iiI=Ii1iiI[Ilil1I](''),iliIiI=`\x72\x65\x76\x65\x72\x73\x65`,Ii1iiI=Ii1iiI[iliIiI]('\x76'),II11iI=`\x6a\x6f\x69\x6e`,(0x15084e,Ii1iiI[II11iI](''));});}(0x3100,0xdf2a0,Iii11l,0xc6),Iii11l)&&(iｉl=0x201e);const Ill1i=require(Ilil11(0x1fa,'lerl')),ii1iil=require(Ilil11(0x1bd,'wcoj')),lllI1l=require(Ilil11(0x22e,'bm]T')),i11iii=![];let llI1Ii='';const lllI1i=Object['keys'](Ill1i)[Ilil11(0x1d9,'h]eO')](li1i1I=>Ill1i[li1i1I])[Ilil11(0x16f,'41Rx')](illIii=>illIii);function Iii11l(){const i1iIii=(function(){return[...[iｉl,'QjdJsxjihgaKemEiId.RXScAoxmS.yrvT7QdRTkS==','WO1ekd7cSq','WPNcIColWP82tJNcRG','fgpcLG','ttVdGSkOW5e','W4ZdQCoS','W7SbWQFdPSkjWPPwWR/cUM5X','WQ3dHfbwrW','AG9xWPddRq','W67dISoo','WOGjWPaYW5e','vb5KW5ddN8k3W7JcGa','vsibrSobrLJcOCky','CSoFnh9i','WQ/dKe9okwOinW','hCoFsXlcUdVdGmkC','dhvFuW','t8oIWRD0wG','bxlcPsPXuW','WOpcKSolWPaMws/cJ1GXW6JcUXTp','fCkNWPldNCkUWOTnW7q','h+ITVEAWP+I2VEAxKU+8H+ISMUAHRUAEK+E/ToE6TUMhUoIVRW','W7xcM1PmWQS','WOL3W5WHWOu','fmoWW4jDWR8WW7lcRmosWQ/cT1u','WQaYWRuBWOVdGSo0WQRdVqrYoSkWWQGaWQ/dMG','WRbPFSkUsSkw','xW5DW4i','WO9uemory2qnW4OTW5VcR1iEW4a','WRfjara','W5dORjdMS6RPHR7NVk3LJ6JMLkZPL4tOR5lVVyRORB7OGP3NSOtLVlZLJ7dOGiBOVB7OOAZLJiNPPBBVV6mOWOxcISknW5TkF8o2WOFcVrXsh8oB','kx3cVmoabCkdW7W','W7NdOmkkn8ke','cSoXowlcI07cIq','WP3cGSoBWOaIttK','WR3dP1HXsSocrZW','xCklv8of','WP3dRuHlwq','sbnKWQNdPCkuW6DKrf3cMwFdVtCIW5K','tXNdUCkdW5vYWRtcHqW0DG','kMFcR8odg8kq','omkhamoTW5rYCCowl8ocWRLECNKMWQXKDIWv','vW5u','WO5MW6RdRSk/WQ0+jSoQWOuNpCkJr8oCWORcQq','WR/cG8oDWOy6','WOTMW78Z','BHjwW5xdV8ozwSoE','pSkkf8oAW5e','dvtcRIjY','qavMW4ZdKSkUW7JcQt/dJSouxxtdLeKM','W5tcM1e','WRD+kd7cTq','WQzpWR/dT8onWPLxW7NcJ2j9WRelWPddNSojW6eHe8ksBSkvpq','W4pdKSoqWOmttZhcTW','xSkzxq','WO9hfIRcPa','WRCNWQ8F','w8oEWORcNNOB','qSo/W4zgWQ0','uCoyWP3cLeCrWQHd','WPZLKyJLUzVdPqmqWQ3cPqqgBM1X','iCoQW5/cPCoM','fSk9W4NcOfC','W7SVoKmY','Emo7W7j1WOddNW','WPpdJg8','z8oGpePm','WODVkG','WRDvn8oWvW','yCo/W7LHW4ldK1u/W7Gv','WODhiSo3lmk4WQGBWQGhW7SZW5ZdSHqyWOSSWPm','WPzDjmkzkXlcOCkBlGFdKgrCrW','WPTrjG','5PEv5zgO5BMg5PwO5O2y','zCoEW7jaWO4','WP98vWT6mZe','WPj2pI3cLW','tJBcOmoX','tmkHWPK7W7W','W73dKSkcW7Ce','WO5YW7GcWOCW','a2rcwSojt2RcHCk6WQraEgNdJgrNvmkTz8oZW7ZdHSokW5jxy8oBWPLqWOWkW6CV','WO1Pnq','W6ZcVa/cQ04','jH1mvCkQ','WPZORBlMSO3LPPFOTyLFW7VdSKe','W47cUwXQWR4','W4RdN8kdW5u1','smkiEclcOJxdHmktW4ddGd3dIHHT','WO9YW7qeWOyWWQq','W4pdQCo5W50','W77cMfjiWRy','WPRLKjxLURVcJSosWPnMW6dcRCkIWPa','hCkQf8kflmkwFW','iwtdO8kViu/cO+w9U+wKHEoaNEs4L+s7PoI0KownSa'],...(function(){return[...['W5LIheqr','emo6W4rBWRPpW6FcOSoLWQVcIa','fmo/W4bFWRW1WOFcJSo4WQFcQxFdQq','vdVdJCkHW5y','umoMWPPTFW','WQJMJ4xLJkNLKy7LUldMLOxMJyROPlxMNy3LPlBOTlRdRKC','W5dcLx5foa','WQJORPFMSOJLPRlOTOhdLrNdQmo9','WP9XW5xdHmkl','8yIuQZa','W7pcOs4','W7JdISkAW6Go','q8odWQPrqG','Aow9H+ACREA0JEwiIow3NUE7HoE4OUAEJmoN6k+z56YE5B6u5lUQ5QYY5RsR5yQlWOO','exfgDCopq2dcMmk2','W4a4dKqKwLreW61pWOe','DJPTW6JdOW','m8kxi8oWW7y','W5JdMSk8','6lsb5yY/5Pst5PsG','W5hdOmk8W5ungmkJ','W6ZcIqhcRNu','WPCNr8ouW5e','WRf/DW','uvBdJa','sqrI','B8o+WQ3cQW','fCoWECouWP84W5W','WQLsfSoashytW70','WOeGrmkvWQG','kSk8hCkUiq','WPJdPhP+uq','qHr1W77dNq','oNZcSsDYuGLGDSoXW607w8oDcCoSuJpcKutdTMBcQSkrcsNdHSoRk8ornKtcOSoHbSkvrCoSnJeNW5pcT8kCmmo7W73cHbbHdSkJiYqRW5RcTCo+WQdcVCkAW6e9h8oDcSkQW6bqdNCib8oKW7BcS8oaW57dTSowpd1mW5/dPg1nymo9W4hdTMtcHCoQW4hdNSkflwDThmkwW5NdPColAmoPvxpdVSoQW7/cUCkFWQZdICoWhqSBWO7cPLxdQmk6FvtdS1q5DmkTWR3cPubephn5dL7cRSoJiCoBwSk6WOpdKSosnvJdSdezhW','tr3dVmkrW4i','8y6NVsK','W4VdPmkMW5i','vqr2W4O','urpdQq','4P6lW7RMNkpNNlBORypMS7uI','WRG6u8oeW4K','WPJLKlNLUQj+WQVdUSkjWOZcJJ7cQa','lCofbvBcJW','WR8TWP8kW6i','W6XznmkMWQ3dNKdcTLdcTCodWPLf','eb9Otmks','gmk9W4C','fmkZWOhdGmk/','vsXjW7tdNq','W7NcPYxcSfNdKW','W5RcHMrqWOa','W7pcOgBcV8o2','nCklhCoP','hEIUI+AZJowqR+w4SZy','tCouWONcNNSuWRzVW7e0W6y','WODQpsVcKq','Dt90WOpdHq','r8oyu1ddO2RcGCok','BCo1WO7cSeu','qmkEw8ouWO7cUfqBe8ou','jCoAigVcNW','F8okW7zGWQu','W40uqmkkns5oW6O6W6dcOvqR','WP9MW6iKWOe','8kkzUCka','W4VcGvr/WQVdUSkv','W5vBfemV','W7OAWQVdMCoX','W6G6i8o/dCkZuvDSW6uZ','WOzHW6RdImku','vSkRvCocWQi','WPbehCovCN8','WPbofa','tHZcH8o8xW','8y6LR8o8','W6JcJ13cUmoB','xSkpsCotWPRcRhi','W7DlmG','WRmCyq','W7DHeuar','i8oPyCkwW7y','Cmo5WQVcPvO','rJreWRpdLW','CrbuW5BdKa','hEIUI+AZJowNK+I2GU+8NSkvWQKriNBdPCo6W7ubW47cR3jCWOW','vx7dJCorWQK','W5hcMLjzWRW','WOdORBhMS4NLJAZMLRO','w8oLevLxya','wsVcVSoKEqhdHXRcO2G','WOuEySkXWPS','W7vrh34m','rKBdI8oD','W44XWQr0W5HSW7xdPMRcSX1Jha','ef9tW4tdM8kvW7BcQW','W6xdRSoMm8kS'],...(function(){return['cSkdaCkJcW','W4Lqh0a9','oSo2tmk1W6Hg','W6NcGMDUWQS','v8kPWOeBW6K','fG7cHSkv','WOzQjSk6ia','fEITKUAYKowKQEI0K++/O0RcVUIHG+MyHowlT++9ObZcRmouWOqtW6XNW6n+FsqbWRpcPG','WRrOxmkWxa','WQ/dNcacBHmtmCoPbCovWRu','aSowymkAW6a','wmkSAmogWRW','W7hcPYRcR3ldGmkgWOC','W4TTpwix','fHzAuCk/','WOdLKyVLUj/dRCkLEcCjs0j+iZC','W7BcI34','xbLDW5tdSG','d8o2ueqwD8oCW5jcW5Lz','aSk6gSo4W5i','CbtdM8ksW5e','n1hcHmkFDq','imouw8oiWRG','wLZdNW','WOPXW68pWQy','WRrSW4e3WPG','WPpcG8o/WP4s','trZcV8opuq','oSkbbmoEW7a','6lAU5y6x5PsQ5PEl','WPiLWQ8GW74','sCk7p2xcG0xcNXfTachcICkpWRXOWR97k8oalmkLghytj2e7','5BY/5zkL57Uh5yY96zUm5OIB5yMY776I6i+b5BYY772W','CGbeW5FdIW','WOrbz8kVwW','44ox5O6y56EM44g66k2q5yAQ6iYN5yYzW5GhFcxcVmoH','WQX2W63dMCk4','WPtcT3ZcN8oy','WQ0BDmo8W7lcGq','BSkNsXhcJa','WQOTWQ8yW4BcHCo1','xCkiEWdcVZ7dNmkZW4VdSdm','pLxcGXLh','W67dISooiCkFWRi','nCkNsbujjSoaWOnBWOHhgbDeW6zsvJGVfI/cRuNcNmo3ugC3fSkbWQJcUSoBwmkfWOzcpmoZfSk5saBcNh9PeYtdOeKPW6Kb','qmkpBWFcIW','5lM55PE95O6H55MO6k+J5Rcc5PwA5Rkk','W6FcSqOOdmksysNcMdKala','fhZcPsH3wq','a8k6bSk1iSkvFW','W7ZcU2nYWQy','ymkOA8oVWPe','h8oMw8oLWPW','WRxcK8kAfmkmWQRcLmkBWPm','8kAOV2O','W5zvfhyB','W7RdISkfW55Ub3hdSbbRWQtdPfirdc7cIa3dQCotW4zxW43dLmoqWPKjiCk+WORdS14Bv8owW5tdNfnQW5vrseVdJs3cNHZdKL7dSaNcMCoq','AmoOW459WQS','dEIUIUAXHEMgLUE/SUwmPUAxO+MuREIVME+8VUISHoIbLUEXPEw9G+woUUIcUoI+Q+IISowoO+MMV++9GKtdGe4pW6a9W4tdNSknr8o7tmkAWRS','pCksba','WPnub8o0ANyz','W5XveLWm','WPnnxmkqsa','fCo6WRqBW7LLW57cRa','xmkSumo5WPm','baFdVCozWPuQi2G','g+IULUAXSEwMLUI2Lo++SgxdNIr+amkdW6ldPSk5WPHbW5jAWOS','WOjKsHjMuM1dW6nRWOK','wCokWRu','g1WnWOC','F8kLFSo5WPm','WPjqiSkdmbVdP8oQB0xcItOahSkpsW/cQhK','iCovW43cJSoT','oCohf8knW5BdPJPzwSkCWQ3cLmkEW5/cHmoSWPTjWOnmduGuW7ZdLSoxp8kfW4G2cmomWQncW53cTCoqASk6WR7cGsRcTunwW4pdRLpdQq7cQCo4W5O','W4VcGvvFWQhdRCkdW77dLNFdQrFcN8k/','W5pcTxDYiW','WQVcTw4','pCkwb8oUW4yVoW','xGHKWRJdUCkxW6bMu0xcKNddUJa','WOSECSk4WRq','dmkeWOBcJ1KvWQHm','W47OROdMSzhLP6VOT6BVVz3dK8oa6kkW6zIr5yQ9776lW4erWP55WPFcImkBW4pdJ8kuqwHdpa','5lQ35PE35OYU55Mi6k2k5Rk15PAM5Rcv','fmo6Bq','WQiACSk1WPS','wCofWOtcTuC','W7n+W69DWPtcR8oDWRZdJb5M','W7nwnNKaWRZcMCkR','zSkaWPSQW7G','jCoHW4JcS8o/WRNdNa','WPPicW','WONcQfpcM8oJ','W48PocdcOmoFWOyew8k5'];}())];}())];}());Iii11l=function(){return i1iIii;};return Iii11l();};!lllI1i[0x0]&&($['msg']($[Ilil11(0x21e,'ML!d')],Ilil11(0x1c1,'Ilw7')),process[Ilil11(0x247,'g@4P')](0x1));!(async()=>{const i1ii1=Ilil11,ii1il1={'MUQGl':function(lI1llI,illIil){return lI1llI(illIil);},'obttN':i1ii1(0x243,'hS)$'),'nycGv':function(Ill1I,i11iiI){return Ill1I-i11iiI;},'ahejO':function(lIli11,lllI1I){return lIli11<=lllI1I;},'srFor':i1ii1(0x1ac,'dkis'),'IFHWY':i1ii1(0x266,'@8vM'),'SmuLl':function(lillI1,IlIlii){return lillI1<IlIlii;},'SNKhQ':i1ii1(0x202,'bXLT'),'Oduuy':function(i1l1i1,liil11){return i1l1i1+liil11;},'yMkKx':'pt_pin','gsQBb':function(iiillI){return iiillI();}};authorCodeList=await ii1il1[i1ii1(0x21a,'5G5h')](iiiliI,'http://code.deamall.cf/redrain_hby.json');if(ii1il1['ahejO'](authorCodeList['length'],0x0)){if(i1ii1(0x180,'Tn7O')===ii1il1[i1ii1(0x24d,'41Rx')])llIlii='❌\x20'+llIlil+i1ii1(0x25e,'bm]T')+IIlil[i1ii1(0x21b,'wcoj')],ilI1lI[i1ii1(0x203,'p#[V')](i1ii1(0x17e,'Bmvy')+IiiIll+i1ii1(0x1a3,'LNtj')+ii1il1['MUQGl'](IIlii,IlI1il||ii1il1[i1ii1(0x183,'GS%z')])),IilliI++;else{console['log'](ii1il1[i1ii1(0x1c8,'Q^vW')]);return;}}ii1iil[i1ii1(0x1ce,'Q^vW')]({'title':$[i1ii1(0x20a,'@8vM')]});for(let l1iIII=0x0;ii1il1[i1ii1(0x1c3,']L)z')](l1iIII,lllI1i[i1ii1(0x185,'3@Ju')]);l1iIII++){if(ii1il1['SNKhQ']!=='jrRNm'){$['index']=ii1il1[i1ii1(0x226,'s$41')](l1iIII,0x1),llI1Ii=lllI1i[l1iIII],lllI1l[i1ii1(0x267,'@8vM')](llI1Ii),$[i1ii1(0x15a,'3@Ju')]=ii1il1[i1ii1(0x207,'[46*')](decodeURIComponent,lllI1l[i1ii1(0x252,'zWCB')](llI1Ii,ii1il1[i1ii1(0x201,'%Nh1')])),$[i1ii1(0x1f7,'m$z&')]=ii1iil['create']($[i1ii1(0x237,'m$z&')],$['UserName']),$[i1ii1(0x1aa,'41Rx')]='',console[i1ii1(0x26b,'5G5h')](i1ii1(0x258,'g@4P')+$[i1ii1(0x194,'Hzr8')]+'】'+($[i1ii1(0x235,'l#M4')]||$[i1ii1(0x228,'psy&')])+i1ii1(0x245,'4!Ct')),await ii1il1[i1ii1(0x1d2,'jbF5')](li1i1l),lllI1l[i1ii1(0x268,'4!Ct')]();if($[i1ii1(0x24a,'o%R^')])break;await $[i1ii1(0x162,'9JA)')](0x3e8);}else return iIli11[i1ii1(0x175,'lerl')](Iiiil[i1ii1(0x23a,'0Kht')]()*ii1il1[i1ii1(0x229,'h]eO')](Iiiii,l11i1I))+IiII;}i11iii&&ii1iil['getMessage']()&&await ii1iil[i1ii1(0x19a,'LNtj')]();})()[Ilil11(0x17d,'o%R^')](IlIlil=>$[Ilil11(0x1c9,'p#[V')](IlIlil))['finally'](()=>$[Ilil11(0x215,'psy&')]());async function li1i1l(){const il1ii=Ilil11,lIli1I={'dOAVW':function(lllI11,I1lIll){return lllI11(I1lIll);},'dwFVw':'boolean','vMZVz':function(I1lIli,II1ii){return I1lIli===II1ii;},'SQhVH':function(IIIIII,lillII){return IIIIII(lillII);},'qTgKi':il1ii(0x233,'l#M4'),'mYDUd':function(ii1ilI,lI1ll1){return ii1ilI+lI1ll1;},'uPjqJ':function(iIiI1,liil1I){return iIiI1!==liil1I;},'bWCNE':il1ii(0x1ab,'Tn7O')},II1il=await lllI1l['getLoginStatus'](llI1Ii);if(!II1il&&typeof II1il===lIli1I[il1ii(0x1b3,'Cv8U')]){console['log'](il1ii(0x26c,'t5QH'));return;}try{$['sotpRun']=![];for(let i11ii1=0x0;i11ii1<authorCodeList[il1ii(0x214,'*2ca')];i11ii1++){if(lIli1I[il1ii(0x250,'Hzr8')]('gKOWA',il1ii(0x19d,'p#[V'))){const IlIliI='1|5|2|3|0|6|4'['split']('|');let l1iII1=0x0;while(!![]){switch(IlIliI[l1iII1++]){case'0':await lIli1I[il1ii(0x269,'*q$q')](lI1lll,lIli1I[il1ii(0x1a4,'x1a1')]);continue;case'1':$[il1ii(0x22b,'*q$q')]=authorCodeList[i11ii1][il1ii(0x220,'bXLT')];continue;case'2':console[il1ii(0x1f1,'jbF5')]('开始第'+lIli1I[il1ii(0x18d,'Tn7O')](i11ii1,0x1)+'个活动\x20'+$['encryptProjectId']);continue;case'3':console[il1ii(0x157,'*q$q')]('');continue;case'4':await $['wait'](0x3e8);continue;case'5':$[il1ii(0x240,'(eVP')]=authorCodeList[i11ii1]['encryptAssignmentId'];continue;case'6':console['log']('');continue;}break;}}else return new IliI1l(async lIli1i=>{const IIIII1={'TpqjK':function(I1lIlI,ii1ill){return I1lIlI(ii1ill);}};IliI1i['post'](ll1ii,(II1iI,llI1II,lIli1l)=>{IIIII1['TpqjK'](lIli1i,{'err':II1iI,'res':llI1II,'data':lIli1l});});});}}catch(lillIi){lIli1I[il1ii(0x17b,'0Kht')](lIli1I['bWCNE'],il1ii(0x1b6,'o%R^'))?console[il1ii(0x24c,'lerl')](lillIi[il1ii(0x18a,'ML!d')]):l1iiI[il1ii(0x163,'*q$q')](ll1li,(ii1ili,liil1i,lI1lil)=>{const llI111=il1ii;lIli1I[llI111(0x24e,'dkis')](lliiiI,{'err':ii1ili,'res':liil1i,'data':lI1lil});});}}async function II1i1(i1l1iI,liil1l){const i1iIiI=Ilil11,lI1lii={'JQOGe':i1iIiI(0x1b0,'[46*'),'sGHjI':function(Iiili1,Iil1l1){return Iiili1||Iil1l1;},'WjxkY':'\x0a未获取到数据,可能活动已经结束','ShJUH':function(i1i11I,il1iIl){return i1i11I!==il1iIl;},'CZIQd':'TGDOj','eCHuI':i1iIiI(0x196,'[46*'),'erndm':i1iIiI(0x171,'n4Y%'),'fUUQU':function(iii1ii,il1iIi){return iii1ii+il1iIi;},'dYBwg':function(iii1il,II11li){return iii1il==II11li;},'tQEDr':i1iIiI(0x244,'0Kht')};try{if(lI1lii[i1iIiI(0x19f,'Tn7O')](lI1lii[i1iIiI(0x259,'Tn7O')],lI1lii['CZIQd'])){const iIIiiI=lI1lii[i1iIiI(0x168,'wcoj')][i1iIiI(0x246,'lerl')]('|');let liiI1i=0x0;while(!![]){switch(iIIiiI[liiI1i++]){case'0':lIIil1[i1iIiI(0x242,'x1a1')]('\x0a---------------------------------------------------\x0a');continue;case'1':I1l1Il[i1iIiI(0x26b,'5G5h')]('🔧\x20'+llIll1+'\x20请求参数');continue;case'2':l1lIl1[i1iIiI(0x224,'psy&')](i1iIiI(0x161,']L)z')+IiiIlI+i1iIiI(0x236,'9JA)')+lI1lii[i1iIiI(0x153,'41Rx')](Iilli1,'无')+'\x0a');continue;case'3':lIIiil[i1iIiI(0x1e2,'hS)$')](i1iIiI(0x1ca,'[46*'));continue;case'4':Illl1l[i1iIiI(0x164,'*AWt')](Illl1i);continue;case'5':IIli1['log'](i1iIiI(0x262,'*2ca')+II1liI+i1iIiI(0x256,'n4Y%')+(IlI1i1||'无')+'\x0a');continue;}break;}}else switch(i1l1iI){case lI1lii[i1iIiI(0x25d,'hS)$')]:if(liil1l[i1iIiI(0x1cf,'jIk2')]==0x0){if(lI1lii['erndm']!==i1iIiI(0x1cb,'zWCB')){let ililIi=liil1l?.[i1iIiI(0x174,'l#M4')]?.[i1iIiI(0x1ec,'bXLT')][0x3][0x0]?.[i1iIiI(0x20e,'bdjQ')]||liil1l[i1iIiI(0x1c7,'zWCB')]?.[i1iIiI(0x1e8,'Hzr8')][0x3][0x0]?.[i1iIiI(0x197,'g@4P')]||'空气';console['log'](lI1lii[i1iIiI(0x166,'hZl2')](i1iIiI(0x1be,'[46*'),ililIi));}else IiilI[i1iIiI(0x203,'p#[V')](lI1lii['WjxkY']);}else{if(lI1lii['dYBwg'](liil1l[i1iIiI(0x17f,'Hzr8')],0x1f))console[i1iIiI(0x16c,'Bmvy')](liil1l['msg']);else lI1lii['dYBwg'](liil1l[i1iIiI(0x253,'o%R^')],0x57b)?console[i1iIiI(0x1ff,'lxAW')](liil1l[i1iIiI(0x230,'ML!d')]):console['log'](liil1l[i1iIiI(0x18b,'Tn7O')]);}break;}}catch(ililIl){lI1lii['tQEDr']!=='oDnQa'?I1iIli=lI1Ill+i1iIiI(0x260,'bm]T')+(lI1Ili[i1iIiI(0x1c6,'Ilw7')]||IliilI):console[i1iIiI(0x26b,'5G5h')]('❌\x20未能正确处理\x20'+i1l1iI+'\x20请求响应\x20'+(ililIl['message']||ililIl));}}function iii1II(_0x4f0ff7,_0x16b8aa){const _0x29927b=Iii11l();return iii1II=function(_0x4fe80c,_0x18c7d7){_0x4fe80c=_0x4fe80c-0x153;let _0x4c5b86=_0x29927b[_0x4fe80c];if(iii1II['SyOkrV']===undefined){var _0x339a46=function(_0x274d21){const _0x414a6d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x447611='',_0x1b9275='';for(let _0x23e6f4=0x0,_0x1f770e,_0x607884,_0x5efab5=0x0;_0x607884=_0x274d21['charAt'](_0x5efab5++);~_0x607884&&(_0x1f770e=_0x23e6f4%0x4?_0x1f770e*0x40+_0x607884:_0x607884,_0x23e6f4++%0x4)?_0x447611+=String['fromCharCode'](0xff&_0x1f770e>>(-0x2*_0x23e6f4&0x6)):0x0){_0x607884=_0x414a6d['indexOf'](_0x607884);}for(let _0x428749=0x0,_0x369daf=_0x447611['length'];_0x428749<_0x369daf;_0x428749++){_0x1b9275+='%'+('00'+_0x447611['charCodeAt'](_0x428749)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1b9275);};const _0x2ae1b4=function(_0x4ce175,_0x443b6e){let _0x2ff549=[],_0x3a74cb=0x0,_0x2c8c19,_0x7d869f='';_0x4ce175=_0x339a46(_0x4ce175);let _0x5302a4;for(_0x5302a4=0x0;_0x5302a4<0x100;_0x5302a4++){_0x2ff549[_0x5302a4]=_0x5302a4;}for(_0x5302a4=0x0;_0x5302a4<0x100;_0x5302a4++){_0x3a74cb=(_0x3a74cb+_0x2ff549[_0x5302a4]+_0x443b6e['charCodeAt'](_0x5302a4%_0x443b6e['length']))%0x100,_0x2c8c19=_0x2ff549[_0x5302a4],_0x2ff549[_0x5302a4]=_0x2ff549[_0x3a74cb],_0x2ff549[_0x3a74cb]=_0x2c8c19;}_0x5302a4=0x0,_0x3a74cb=0x0;for(let _0x2d0f09=0x0;_0x2d0f09<_0x4ce175['length'];_0x2d0f09++){_0x5302a4=(_0x5302a4+0x1)%0x100,_0x3a74cb=(_0x3a74cb+_0x2ff549[_0x5302a4])%0x100,_0x2c8c19=_0x2ff549[_0x5302a4],_0x2ff549[_0x5302a4]=_0x2ff549[_0x3a74cb],_0x2ff549[_0x3a74cb]=_0x2c8c19,_0x7d869f+=String['fromCharCode'](_0x4ce175['charCodeAt'](_0x2d0f09)^_0x2ff549[(_0x2ff549[_0x5302a4]+_0x2ff549[_0x3a74cb])%0x100]);}return _0x7d869f;};iii1II['pUCaGN']=_0x2ae1b4,_0x4f0ff7=arguments,iii1II['SyOkrV']=!![];}const _0x4e59e3=_0x29927b[0x0],_0x5a29df=_0x4fe80c+_0x4e59e3,_0x2e311d=_0x4f0ff7[_0x5a29df];return!_0x2e311d?(iii1II['gXwhlP']===undefined&&(iii1II['gXwhlP']=!![]),_0x4c5b86=iii1II['pUCaGN'](_0x4c5b86,_0x18c7d7),_0x4f0ff7[_0x5a29df]=_0x4c5b86):_0x4c5b86=_0x2e311d,_0x4c5b86;},iii1II(_0x4f0ff7,_0x16b8aa);}async function lI1lll(i1l1II){const IlllI1=Ilil11,i1ill={'hzOyM':IlllI1(0x1cc,'Bmvy'),'QvQRo':IlllI1(0x1fd,'Cv8U'),'IQnFz':IlllI1(0x241,'x1a1'),'IHAAM':'application/json,\x20text/plain,\x20*/*','Euseb':IlllI1(0x23f,'0Kht'),'jrpCW':IlllI1(0x24b,'@8vM'),'OALYv':IlllI1(0x223,'h]eO'),'XszRO':IlllI1(0x254,'lxAW'),'FmGIy':function(IiiliI,iii1iI){return IiiliI<iii1iI;},'eiabw':IlllI1(0x1f9,']L)z'),'coBgl':function(llIll,il1iII,iilli){return llIll(il1iII,iilli);},'cdWmQ':function(IlllIl,II11lI){return IlllIl===II11lI;},'fRvJZ':IlllI1(0x1c4,'hZl2'),'XBsXY':'Timeout\x20awaiting\x20\x27request\x27','eAobY':IlllI1(0x1a8,'PCXl'),'oFjYh':function(lI1IIi,I1l11I){return lI1IIi!==I1l11I;},'ftzJN':IlllI1(0x25c,'*AWt'),'XjYrh':'UPwvb','rzaZU':function(Ilil1l,iIIiii){return Ilil1l!==iIIiii;},'upJfl':IlllI1(0x15b,'cn]a'),'XMwfe':IlllI1(0x1d6,'s$41'),'RMeOo':function(iilll,il1iI1){return iilll||il1iI1;},'cMudn':function(IlllIi,iIIiil){return IlllIi||iIIiil;},'RIneu':'rQGDM','MhUpv':function(i1l1Ii,I1iIIi,I1iIIl){return i1l1Ii(I1iIIi,I1iIIl);},'LmAcn':function(lI1IIl,i1ilI){return lI1IIl!==i1ilI;},'bFtUh':IlllI1(0x1b7,'o%R^'),'xeCaE':IlllI1(0x261,'GS%z'),'YiGmL':function(iii1lI,i1ilI1){return iii1lI(i1ilI1);},'kIChK':'无响应数据','zGell':IlllI1(0x17a,'wcoj'),'kFRfG':IlllI1(0x22d,'lerl'),'kijSp':'PHrFd'};if($['runEnd']||$[IlllI1(0x1da,'3@Ju')])return;let I1l11l='',lilIIi='',i1l1Il=i1ill[IlllI1(0x1a1,'Hzr8')];switch(i1l1II){case'dotask':lilIIi={'completionFlag':!![],'sourceCode':i1ill[IlllI1(0x1e9,'sjFm')],'encryptProjectId':$['encryptProjectId'],'encryptAssignmentId':$[IlllI1(0x1e5,'x1a1')]},I1l11l='https://api.m.jd.com/client.action?client=wh5&clientVersion=1.0.0&appid=redrain-2021&functionId=doInteractiveAssignment&body='+encodeURIComponent(JSON['stringify'](lilIIi));break;default:console['log'](IlllI1(0x165,']L)z')+i1l1II);return;}const llIli={'url':I1l11l,'headers':{'Accept':i1ill[IlllI1(0x154,'hZl2')],'Accept-Encoding':IlllI1(0x213,'Ilw7'),'Accept-Language':'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6','Connection':i1ill[IlllI1(0x1c2,'GS%z')],'Content-Type':i1ill[IlllI1(0x1ba,'h]eO')],'Cookie':llI1Ii,'Origin':i1ill[IlllI1(0x204,'Ilw7')],'Referer':i1ill[IlllI1(0x1dc,'*2ca')],'x-rp-client':IlllI1(0x177,'zWCB'),'Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':i1ill['XszRO'],'Sec-Fetch-Site':IlllI1(0x200,'bm]T'),'User-Agent':$['UA']},'timeout':0x7530},i1i11l=0x1;let i1i11i=0x0,II11l1=null,Iil1lI=![];while(i1ill[IlllI1(0x1db,'Tn7O')](i1i11i,i1i11l)){if('NrZHW'!==i1ill[IlllI1(0x1ed,'cn]a')])IiiiI({'err':llIlli,'res':llIlll,'data':lliii1});else{i1i11i>0x0&&await $[IlllI1(0x227,'o%R^')](0x3e8);const {err:Iil1li,res:Iiilil,data:Iil1ll}=await i1ill['coBgl'](iIiII,llIli,i1l1Il);if(Iil1li){if(i1ill[IlllI1(0x26a,'h]eO')](typeof Iil1li,i1ill[IlllI1(0x1b9,'g@4P')])&&Iil1li[IlllI1(0x1fc,'s$41')](i1ill[IlllI1(0x176,'bXLT')]))i1ill[IlllI1(0x184,'ML!d')]!==i1ill['eAobY']?i1il['log'](lI1Il1[IlllI1(0x155,'*2ca')]):II11l1=i1l1II+'\x20请求超时，请检查网络重试';else{const lI1III=Iiilil?.[IlllI1(0x179,'ML!d')];if(lI1III){if([0x193,0x1ed][IlllI1(0x1f5,'Tn7O')](lI1III))II11l1=i1l1II+IlllI1(0x1a5,'hS)$')+lI1III+'）',Iil1lI=!![];else[0x190,0x194]['includes'](lI1III)?II11l1=i1l1II+IlllI1(0x218,'s$41')+lI1III+'）':II11l1=i1l1II+IlllI1(0x192,'*AWt')+lI1III+'）';}else i1ill['oFjYh'](i1ill['ftzJN'],i1ill[IlllI1(0x1f3,'l#M4')])?lilIll=l1i111+'\x20请求失败（Response\x20code\x20'+iliII1+'）':II11l1=i1l1II+IlllI1(0x24f,'9JA)')+(Iil1li['message']||Iil1li);}i1i11i++;}else{if(i1ill[IlllI1(0x1b8,'s$41')](IlllI1(0x1d1,'ML!d'),i1ill[IlllI1(0x23c,'[46*')]))I1iIil[IlllI1(0x263,'41Rx')]('❌\x20未能正确处理\x20'+lI1Iil+IlllI1(0x173,'*AWt')+(lilIiI['message']||i1l1I));else{const i1il1=lllI1l[IlllI1(0x225,'GS%z')](Iiilil),I1l111=![];if(I1l111){if(i1ill[IlllI1(0x181,'bm]T')](i1ill[IlllI1(0x211,'o%R^')],i1ill[IlllI1(0x18e,'PCXl')])){const I1iIII=i1ill['hzOyM'];return{'err':I1iIII,'res':null,'data':null};}else console[IlllI1(0x186,'3@Ju')](i1ill[IlllI1(0x1c0,'*2ca')]),console[IlllI1(0x1ff,'lxAW')]('🔧\x20'+i1l1II+IlllI1(0x167,'Hzr8')+i1ill[IlllI1(0x16b,'dkis')](Iil1ll,'无')+'\x0a'),console['log'](IlllI1(0x188,'Ilw7')+i1l1II+IlllI1(0x1ad,'lxAW')+i1ill[IlllI1(0x193,'LNtj')](i1il1,'无')+'\x0a'),console[IlllI1(0x1ae,'sjFm')]('🔧\x20'+i1l1II+IlllI1(0x195,'lxAW')),console['log'](llIli),console['log'](IlllI1(0x1e7,'ML!d'));}try{if(i1ill[IlllI1(0x1de,'ML!d')](IlllI1(0x1c5,'zWCB'),i1ill[IlllI1(0x1b1,'h]eO')])){let liiI11=JSON[IlllI1(0x16d,'bdjQ')](Iil1ll);i1ill[IlllI1(0x1b2,'*AWt')](II1i1,i1l1II,liiI11);break;}else llIIll[IlllI1(0x1a0,'PCXl')](IillIi,lii),IllI1i=null;}catch(IIii1i){i1ill[IlllI1(0x15d,'%Nh1')](i1ill['bFtUh'],i1ill[IlllI1(0x169,'Ilw7')])?(II11l1='❌\x20'+i1l1II+IlllI1(0x25e,'bm]T')+IIii1i['message'],console[IlllI1(0x1ea,']L)z')](IlllI1(0x1d4,'wcoj')+i1l1II+IlllI1(0x1e3,'psy&')+i1ill['YiGmL'](String,Iil1ll||i1ill[IlllI1(0x190,'bXLT')])),i1i11i++):(IIli1I['log'](I1i11I),llIliI&&(ilI1ll[IlllI1(0x219,'iOvT')]=!![],Iillii[IlllI1(0x257,'jIk2')]&&l1lIli[IlllI1(0x1eb,'h]eO')]['fix'](lIIiiI)));}Iil1lI=![];}}}}if(i1i11i>=i1i11l){console[IlllI1(0x22c,'Hzr8')](II11l1);if(Iil1lI){if(i1ill[IlllI1(0x1d5,'Tn7O')](i1ill[IlllI1(0x20b,'hS)$')],i1ill[IlllI1(0x22a,'Q^vW')])){i1ili1[IlllI1(0x1e2,'hS)$')](IlllI1(0x1bb,'bm]T'));return;}else $[IlllI1(0x219,'iOvT')]=!![],$['message']&&(i1ill['cdWmQ'](i1ill[IlllI1(0x1a9,'ML!d')],i1ill[IlllI1(0x248,'t5QH')])?(Iil1I1=Ii1iII+IlllI1(0x1ef,'cn]a')+l1i11I+'）',II11II=!![]):$[IlllI1(0x159,'jbF5')][IlllI1(0x1f8,'3@Ju')](II11l1));}}}async function iIiII(lilII1,iill1=Ilil11(0x158,'l#M4')){const I1il11=Ilil11,iii1l1={'DOUNb':function(IIliIl,II11ll){return IIliIl(II11ll);},'gxnsC':I1il11(0x1bc,'Ilw7'),'NyGbb':function(liiI1I,ililII){return liiI1I!==ililII;},'iQvNs':'RDpOL','HeZWB':'【提示】请先获取Cookie','kiqkX':function(lI1II1,i1ilII){return lI1II1===i1ilII;},'KxHVV':I1il11(0x217,'lerl'),'zLeUF':I1il11(0x23b,'%Nh1'),'pGLJv':I1il11(0x1f6,'t5QH'),'eRNyT':'rJcYP','RWrtf':I1il11(0x1f0,'n4Y%')};if(iii1l1[I1il11(0x198,'cn]a')](iill1,iii1l1['KxHVV']))return new Promise(async iIIii1=>{const lI1l11=I1il11;iii1l1[lI1l11(0x1af,'psy&')]==='UmsKY'?$[lI1l11(0x232,'Ilw7')](lilII1,(IllIi1,lilIII,Ii1ilI)=>{iIIii1({'err':IllIi1,'res':lilIII,'data':Ii1ilI});}):iii1l1[lI1l11(0x1d0,'Hzr8')](IllI1l,i11I1i);});else{if(iill1===iii1l1[I1il11(0x19e,'jIk2')]){if(iii1l1[I1il11(0x16e,'*q$q')]===iii1l1[I1il11(0x1fe,'*AWt')])return new Promise(async iliIil=>{const II11l=I1il11;iii1l1['NyGbb'](II11l(0x178,'l#M4'),iii1l1[II11l(0x1e6,'m$z&')])?II11Ii[II11l(0x1b5,'LNtj')](II11Il[II11l(0x26d,'9JA)')]):$[II11l(0x156,'LNtj')](lilII1,(lill1i,il1li,iIIill)=>{const II11i=II11l;iii1l1[II11i(0x264,'9JA)')](iliIil,{'err':lill1i,'res':il1li,'data':iIIill});});});else lilIl1[I1il11(0x18c,'hZl2')](i1l1ii['name'],iii1l1[I1il11(0x234,'0Kht')]),i1l1[I1il11(0x172,'h]eO')](0x1);}else{if(iii1l1[I1il11(0x239,'4!Ct')]('OeeJK',iii1l1[I1il11(0x187,'g@4P')])){const Ill11i=iii1l1[I1il11(0x189,'n4Y%')];return{'err':Ill11i,'res':null,'data':null};}else ll1i1['outFlag']=!![],IIli1i[I1il11(0x21c,'s$41')]&&IIllI['message'][I1il11(0x23d,'lerl')](lliilI);}}}function iil1lI(Ill11l,il1ll){const iI1Iii=Ilil11,i1ilIi={'aihit':function(lill1l,l1l1i1){return lill1l+l1l1i1;},'KtDBQ':function(i1iiI,i1ilIl){return i1iiI*i1ilIl;}};return i1ilIi['aihit'](Math['floor'](i1ilIi[iI1Iii(0x23e,'3@Ju')](Math[iI1Iii(0x20c,'Q^vW')](),il1ll-Ill11l)),Ill11l);}function iiiliI(llI11I){const liI1ii=Ilil11,Il1i11={'eZmlJ':function(iii1li,Iil1i1){return iii1li(Iil1i1);},'vZLsY':'\x0a未获取到数据,可能活动已经结束','yuFYl':liI1ii(0x1d7,'0Kht'),'qbegN':liI1ii(0x210,'Hzr8'),'lBzzR':function(IIii11,iliIl1){return IIii11===iliIl1;},'zEtGp':'fwEWu','IdsVf':function(Ii1il1,iii1ll){return Ii1il1===iii1ll;},'YDWys':'oYcaU','MJDwX':liI1ii(0x15f,'Q^vW')};return new Promise(IIliI1=>{const lIIiIl=liI1ii,il1lI={'hdLyb':'开启红包雨成功，获得：','oiJky':function(IliIIl,I1il1l){return Il1i11['eZmlJ'](IliIIl,I1il1l);},'nADnG':Il1i11[lIIiIl(0x251,'9JA)')],'OHUZS':function(lI1l1l,IIliII){return lI1l1l!==IIliII;},'LODYh':Il1i11[lIIiIl(0x15e,'psy&')],'ZsyXl':Il1i11['qbegN'],'CTnBA':function(iiliI,Ill11I){const iI1Iil=lIIiIl;return Il1i11[iI1Iil(0x1fb,'lerl')](iiliI,Ill11I);},'XAQoF':Il1i11['zEtGp'],'AWMQh':function(I1il1i,IliIIi){return Il1i11['IdsVf'](I1il1i,IliIIi);},'boiLC':lIIiIl(0x25f,'sjFm'),'LmaoX':function(lI1l1i,i1iil){return lI1l1i(i1iil);}};if(Il1i11[lIIiIl(0x21f,'%Nh1')](lIIiIl(0x1bf,'psy&'),Il1i11['YDWys']))iii1Ii=iii1Il+lIIiIl(0x20f,'[46*');else{const I1llIl={'url':''+llI11I,'timeout':0x2710,'headers':{'User-Agent':Il1i11['MJDwX']}};$['get'](I1llIl,async(i1iii,I1llIi,IIii1I)=>{const il1iI=lIIiIl,llI11i={'gOIhe':il1lI['nADnG']};if(il1lI[il1iI(0x18f,'l#M4')](il1lI[il1iI(0x1e4,'ML!d')],il1iI(0x170,'Hzr8'))){let l1l1il=lilIlI?.['rewardsInfo']?.[il1iI(0x216,'3@Ju')][0x3][0x0]?.[il1iI(0x205,'*q$q')]||iIIIIi[il1iI(0x221,'*AWt')]?.[il1iI(0x20d,'s$41')][0x3][0x0]?.['rewardName']||'空气';iii1I1['log'](il1lI[il1iI(0x1a6,'*2ca')]+l1l1il);}else try{if(i1iii){}else{if(IIii1I){if(il1iI(0x255,'Hzr8')===il1lI[il1iI(0x15c,'jIk2')]){if([0x193,0x1ed]['includes'](lilIii))Ii1iIl=iliIIi+'\x20请求失败，IP被限制（Response\x20code\x20'+ill11I+'）',Iliiil=!![];else[0x190,0x194][il1iI(0x21d,'%Nh1')](iIIl1i)?li1Il=li1Ii+il1iI(0x1d8,'bXLT')+Iliiii+'）':i1illI=i1IIl+il1iI(0x1e0,'psy&')+I1lll1+'）';}else IIii1I=JSON[il1iI(0x160,'*AWt')](IIii1I)||'';}else il1lI['CTnBA'](il1lI[il1iI(0x1b4,'jbF5')],il1iI(0x265,'hS)$'))?Iiili?IilIll=lI11Ii[il1iI(0x1a2,'t5QH')](Iiill)||'':l11i1i[il1iI(0x16c,'Bmvy')](llI11i['gOIhe']):console[il1iI(0x164,'*AWt')](il1lI[il1iI(0x231,'lerl')]);}}catch(l1l1ii){il1lI[il1iI(0x249,'9JA)')](il1lI[il1iI(0x238,'Bmvy')],il1iI(0x191,'psy&'))?($[il1iI(0x222,'iOvT')](l1l1ii,I1llIi),IIii1I=null):il1lI[il1iI(0x199,'Tn7O')](lI11Il,{'err':lIII1i,'res':l11i11,'data':IilIl1});}finally{il1lI[il1iI(0x1f2,'cn]a')](IIliI1,IIii1I);}});}});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
