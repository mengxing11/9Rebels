/*
京豆红包雨

cron:1 1 1 1 * jd_redrain_hby.js

*/

const $ = new Env('京豆红包雨');
var iｉl='jsjiami.com.v7';const Ilil1i=iii1II;(function(iiliI,Ill11I,I1il1i,IliIIi,lI1l1i,i1iil,llI11l){return iiliI=iiliI>>0x8,i1iil='hs',llI11l='hs',function(I1llIl,i1iii,I1llIi,IIii1I,llI11i){const Ii1iil=iii1II;IIii1I='tfi',i1iil=IIii1I+i1iil,llI11i='up',llI11l+=llI11i,i1iil=I1llIi(i1iil),llI11l=I1llIi(llI11l),I1llIi=0x0;const i1iIi1=I1llIl();while(!![]&&--IliIIi+i1iii){try{IIii1I=parseInt(Ii1iil(0x25d,'n]wL'))/0x1+parseInt(Ii1iil(0x2d7,'1h3y'))/0x2+parseInt(Ii1iil(0x270,'#ByN'))/0x3+-parseInt(Ii1iil(0x239,'HEw0'))/0x4+parseInt(Ii1iil(0x268,'#ByN'))/0x5*(-parseInt(Ii1iil(0x2de,'HEw0'))/0x6)+parseInt(Ii1iil(0x21e,'#ByN'))/0x7+-parseInt(Ii1iil(0x243,'uQUz'))/0x8*(parseInt(Ii1iil(0x28c,'3o82'))/0x9);}catch(l1l1il){IIii1I=I1llIi;}finally{llI11i=i1iIi1[i1iil]();if(iiliI<=IliIIi)I1llIi?lI1l1i?IIii1I=llI11i:lI1l1i=llI11i:I1llIi=llI11i;else{if(I1llIi==lI1l1i['replace'](/[AHGnMYqyUwgelWktQPI=]/g,'')){if(IIii1I===i1iii){i1iIi1['un'+i1iil](llI11i);break;}i1iIi1[llI11l](llI11i);}}}}}(I1il1i,Ill11I,function(I11i1I,iliIi1,l1l1ii,Il1i1I,Ii1iii,iIIilI,il1l1){return iliIi1='\x73\x70\x6c\x69\x74',I11i1I=arguments[0x0],I11i1I=I11i1I[iliIi1](''),l1l1ii=`\x72\x65\x76\x65\x72\x73\x65`,I11i1I=I11i1I[l1l1ii]('\x76'),Il1i1I=`\x6a\x6f\x69\x6e`,(0x150851,I11i1I[Il1i1I](''));});}(0xc100,0xd452a,Iii11l,0xc3),Iii11l)&&(iｉl=0xc3);function iii1II(_0x3dc876,_0x5cdde2){const _0x1ba647=Iii11l();return iii1II=function(_0xec5dc5,_0x29ac3e){_0xec5dc5=_0xec5dc5-0x1e8;let _0x5cc9f6=_0x1ba647[_0xec5dc5];if(iii1II['YFECdQ']===undefined){var _0x4b45d5=function(_0x2e29b9){const _0xf522c5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5906e9='',_0xe5cac6='';for(let _0x162f1d=0x0,_0x4cb361,_0x5a5b38,_0x20e0f3=0x0;_0x5a5b38=_0x2e29b9['charAt'](_0x20e0f3++);~_0x5a5b38&&(_0x4cb361=_0x162f1d%0x4?_0x4cb361*0x40+_0x5a5b38:_0x5a5b38,_0x162f1d++%0x4)?_0x5906e9+=String['fromCharCode'](0xff&_0x4cb361>>(-0x2*_0x162f1d&0x6)):0x0){_0x5a5b38=_0xf522c5['indexOf'](_0x5a5b38);}for(let _0x421069=0x0,_0x31173c=_0x5906e9['length'];_0x421069<_0x31173c;_0x421069++){_0xe5cac6+='%'+('00'+_0x5906e9['charCodeAt'](_0x421069)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xe5cac6);};const _0x4c6fd5=function(_0x5405f4,_0x4c6336){let _0x510450=[],_0x5c7974=0x0,_0x272764,_0x5d1fca='';_0x5405f4=_0x4b45d5(_0x5405f4);let _0x4afef9;for(_0x4afef9=0x0;_0x4afef9<0x100;_0x4afef9++){_0x510450[_0x4afef9]=_0x4afef9;}for(_0x4afef9=0x0;_0x4afef9<0x100;_0x4afef9++){_0x5c7974=(_0x5c7974+_0x510450[_0x4afef9]+_0x4c6336['charCodeAt'](_0x4afef9%_0x4c6336['length']))%0x100,_0x272764=_0x510450[_0x4afef9],_0x510450[_0x4afef9]=_0x510450[_0x5c7974],_0x510450[_0x5c7974]=_0x272764;}_0x4afef9=0x0,_0x5c7974=0x0;for(let _0x1233e2=0x0;_0x1233e2<_0x5405f4['length'];_0x1233e2++){_0x4afef9=(_0x4afef9+0x1)%0x100,_0x5c7974=(_0x5c7974+_0x510450[_0x4afef9])%0x100,_0x272764=_0x510450[_0x4afef9],_0x510450[_0x4afef9]=_0x510450[_0x5c7974],_0x510450[_0x5c7974]=_0x272764,_0x5d1fca+=String['fromCharCode'](_0x5405f4['charCodeAt'](_0x1233e2)^_0x510450[(_0x510450[_0x4afef9]+_0x510450[_0x5c7974])%0x100]);}return _0x5d1fca;};iii1II['nboYiZ']=_0x4c6fd5,_0x3dc876=arguments,iii1II['YFECdQ']=!![];}const _0x247425=_0x1ba647[0x0],_0x2ffb14=_0xec5dc5+_0x247425,_0x3b03c6=_0x3dc876[_0x2ffb14];return!_0x3b03c6?(iii1II['gUNFfr']===undefined&&(iii1II['gUNFfr']=!![]),_0x5cc9f6=iii1II['nboYiZ'](_0x5cc9f6,_0x29ac3e),_0x3dc876[_0x2ffb14]=_0x5cc9f6):_0x5cc9f6=_0x3b03c6,_0x5cc9f6;},iii1II(_0x3dc876,_0x5cdde2);}const lillIl=require(Ilil1i(0x204,'wksC')),iIiIl=require(Ilil1i(0x22c,'7qHI')),iiilii=require(Ilil1i(0x20e,'89$6')),li1i1i=![];let IlIli1='';const illIiI=Object[Ilil1i(0x209,'CH*2')](lillIl)['map'](ii1iil=>lillIl[ii1iil])[Ilil1i(0x1fa,'DF^3')](lllI1l=>lllI1l);!illIiI[0x0]&&($[Ilil1i(0x2b9,'4qdp')]($[Ilil1i(0x2c4,'n]wL')],Ilil1i(0x246,'wksC')),process[Ilil1i(0x1ea,'oG(A')](0x1));!(async()=>{const iili1=Ilil1i,i11iii={'unErl':function(llI1Ii,lllI1i){return llI1Ii(lllI1i);},'KcsbH':function(li1i1l,II1i1){return li1i1l<=II1i1;},'knuJH':iili1(0x2c2,'1h3y'),'eoGdt':function(lI1lll,iIiII){return lI1lll<iIiII;},'PXSeM':function(iil1lI,iiiliI){return iil1lI===iiiliI;},'AxXKp':iili1(0x1fb,'n]wL'),'wzCbg':function(li1i1I,illIii){return li1i1I+illIii;},'nHbQy':'pt_pin','wMupu':function(ii1il1){return ii1il1();}};authorCodeList=await i11iii['unErl'](Ill1i,iili1(0x2b0,'Xxcx'));if(i11iii[iili1(0x1f6,'9YBb')](authorCodeList[iili1(0x2d5,'DF^3')],0x0)){console[iili1(0x236,'[PXb')](i11iii['knuJH']);return;}iIiIl[iili1(0x232,'H85u')]({'title':$[iili1(0x282,'PGTg')]});for(let lI1llI=0x0;i11iii[iili1(0x27d,'#)ws')](lI1llI,illIiI[iili1(0x2c8,'yZ9c')]);lI1llI++){if(i11iii[iili1(0x253,'7qHI')](i11iii[iili1(0x2d4,'K^FM')],i11iii[iili1(0x235,'UKtY')])){$[iili1(0x247,'PGTg')]=i11iii['wzCbg'](lI1llI,0x1),IlIli1=illIiI[lI1llI],iiilii[iili1(0x20a,'wCy1')](IlIli1),$['UserName']=i11iii['unErl'](decodeURIComponent,iiilii['getCookieValue'](IlIli1,i11iii[iili1(0x2bd,'n]wL')])),$[iili1(0x273,'wVGg')]=iIiIl[iili1(0x29e,'eaww')]($['index'],$[iili1(0x2cd,'#ByN')]),$[iili1(0x21a,'[PXb')]='',console[iili1(0x291,'Du(q')]('\x0a******开始【京东账号'+$['index']+'】'+($[iili1(0x2a2,'(qr3')]||$[iili1(0x26a,'33j]')])+iili1(0x2e4,'PGTg')),await i11iii[iili1(0x234,'oFJj')](lI1lli),iiilii[iili1(0x20b,'X4q%')]();if($[iili1(0x227,'UKtY')])break;await $['wait'](0x3e8);}else II1lli[iili1(0x2cc,'#)ws')]('\x0a未获取到数据,可能活动已经结束');}li1i1i&&iIiIl[iili1(0x217,'9YBb')]()&&await iIiIl['push']();})()[Ilil1i(0x2ba,'yZ9c')](Ill1I=>$[Ilil1i(0x286,'n]wL')](Ill1I))[Ilil1i(0x28f,'1h3y')](()=>$['done']());async function lI1lli(){const II11ii=Ilil1i,i11iiI={'oWdLg':'boolean','czJvd':function(lllI1I,lillI1){return lllI1I!==lillI1;},'YOKhn':II11ii(0x244,'n]wL'),'pPuJA':II11ii(0x23a,'UKtY'),'EIqRd':function(IlIlii,i1l1i1){return IlIlii(i1l1i1);},'bUwSd':'dotask','foiAq':function(liil11,iiillI){return liil11+iiillI;}},lIli11=await iiilii[II11ii(0x22a,'KFh4')](IlIli1);if(!lIli11&&typeof lIli11===i11iiI[II11ii(0x220,'oG(A')]){if(i11iiI[II11ii(0x2c7,'4qdp')](II11ii(0x1ee,'t5Xg'),II11ii(0x2ad,'uQUz')))II11Ii['log'](II11Il[II11ii(0x2db,'[PXb')]);else{console[II11ii(0x237,'uQUz')]('账号无效');return;}}try{if(i11iiI[II11ii(0x229,'pd9N')](i11iiI[II11ii(0x203,'u5[E')],i11iiI[II11ii(0x2df,'pd9N')]))return new illIll(async llI1I1=>{const Iil1iI=II11ii;iiilli[Iil1iI(0x201,'1h3y')](l1iIIl,(IlIlil,lIli1I,II1il)=>{llI1I1({'err':IlIlil,'res':lIli1I,'data':II1il});});});else{$[II11ii(0x27f,'(qr3')]=![];for(let lllI11=0x0;lllI11<authorCodeList[II11ii(0x1ef,'7qHI')];lllI11++){const I1lIll=i11iiI[II11ii(0x264,'DF^3')][II11ii(0x287,'%czp')]('|');let I1lIli=0x0;while(!![]){switch(I1lIll[I1lIli++]){case'0':await $['wait'](0x1f4);continue;case'1':await i11iiI[II11ii(0x2ab,'4qdp')](llI1Il,i11iiI[II11ii(0x26e,'K^FM')]);continue;case'2':console['log'](i11iiI['foiAq'](II11ii(0x267,'3o82')+i11iiI[II11ii(0x257,'7qHI')](lllI11,0x1)+'个活动\x20',$[II11ii(0x29f,'33j]')]));continue;case'3':console[II11ii(0x2d9,'89$6')]('');continue;case'4':$[II11ii(0x27a,'uQUz')]=authorCodeList[lllI11]['encryptProjectId'];continue;case'5':$['encryptAssignmentId']=authorCodeList[lllI11]['encryptAssignmentId'];continue;}break;}}}}catch(II1ii){console[II11ii(0x2d9,'89$6')](II1ii['message']);}}function Iii11l(){const l1l1iI=(function(){return[...[iｉl,'qljkYstjiUaQmYqHiAG.UckWgowlmyI.even7gPM==','omo/wg3cMG','feBcHSoKza','FmoAuW','WPtcPxe','x8kqWRtcUSkrtw4gWRpdKeVcPSo1','sNJcN8ogyuJcSfRcGbtdJ8kKjG','yuldQ8otjSoQmIFdOCoGwq','WPpdKmkPF0aoxG','W6lcTCkCaCog','WOFcRmofeCkOW796ASkjgSkp','xmopEZnLWOOY','W6ldQ8kGW6/dOG','nmkci8kezhtcUSk3WRCAWOy','b8o+BmoVWQS','pXxdUW','W4/dVs8NEe/cNSoyW5SwW6ZcRa','bCoWgHNcTW','8k+OQ1u','44gO5O+U56Av44gm6k2G5yEZ6i2T5y+gW7bNW47dONBcGG','kSoUeCkBW7e','j0/cNaG','W4pdN3xdVCoa','W6tcImoz','W4xcU8kZpCo1','lSo3W4hcTmo6','WQKNkZj9DXjEWQZdNt0','W5RMJ5lLJQJLK6RLUPJMLQhMJi7OP5VMN5ZLPBVOTkG8hG','W7ucW7CgWOpdR33cICo7acG','WOKHWRu','z+ISLoAWJowNKoI1Ro+8L8kbWO7OOBVPMkpLI57VV5xcISo3W6ZdTeJcU3Sys8oAW4hcUmo/iq','WOeeWRmIW58','nd3cGxRcQq','iwBcGHWXire','z8oquW','WR4SpYf2yXvwWRhdIdVcIWr7WPnBacBdMG','aGRcU17cLq','WR3cMdK6W7S','W49lWRNdJCos','p8o1cSod','ySorv2hdIg9SWPO','mmo0fmkkW7ZcTSkdW5JdJ8or','CSkPqKpdH38NkSkQlhm7','WRX1BsRdPa','WO7dQCksoCo4W4GJrG','W5KKWO0','WRiZWQW','WR8gWOtdKCkE','W4zGW6ZcQue','h8oQlmoDcW','Fmo3BKhdLq','WQW5WRZcLSosW7NcLrVcSmoqma','5B+a5AA156+P','WPdcSmoQWOxcMmojW7qtn8ote8kg','WRLIErVdOmkrWOW','vaHEWRKgi8oJsq','oCoUfJJcNs4e','WQveW5u','W7tOR7dMSyJLPzNOTQtVV7RcOmkU6kgC6zMd5yUW77+DpmkxWQj/dte9W7L/WRK9WQC7jG','WQWXWPBdTCkC','aSk7hmkKhG','WPlcSSoQWO3cMmokWQGElCo4pmkhDa','bf9LWRbu','WRPFW4ddJCoVlYNdNCkj','W5RcTCkehSo9W6qQ','WPyyla','WRHOBq','WPmpgafL','W6qNWRxdR2S','bCoCW7xdUmowrhvVWPBdRMFdICocW6NdQs4JW4/dM3RdPCoVWQOxFvytWPddO1ZcGSk3B8o7d8kXF8oInHzwAYO8W6hdTCkiBmoAAmo8tKJcOSosaMLNdZFcRCkNW5rbv8kudNryW4dcN8kon8ozWPJdNNrKW4RdPmoDrgBdGmokW7iEqrVdUmoFW6rDW4ZdK8kpWQqfsJW3W6Ssv8o1W5VcQbBcRXKqWOWGWPb9WP7cOSo5axxcM8obp2tdMq','W5qkWQhdR3W','WP3cPhvJoaNcQCooW5aJW5dcMx4fW4em','5lMI5PAv5O2y55It6k695RoS5Pwb5RcR','WP/cIJSHW48','eM/cIdJcIa','nKNcVCo1wq','WOKyp1DEWQqo','xSoIxdHh','f8oPgmkBW6BcSmk0WPFdISodarvAW4VcLGWMW6hcSYzjcCklWOKhyG','lCoHgmkB','WR3MN7ROJydLJRVLIQZML7pMJke65y2v6ikB5RAf5yUq5Bwg57Q157MP5P+T','W6FdJSk+wc4VWRBdQG','W5VcV8kq','jSo0eZ7cGdG','thbQWPbk'],...(function(){return[...['FgSH','WOFcJcu5W6biDq','W4ddTmktW7NdUG','WPrEWRKBWPu','W7LhWQaUW5FdMclcPq','twvXWPHmW41tjmkjcJq','WQG2lJPHDa','WOZcGdGRW61dAq','WQjoW5FdLmkSksZdKSkgiq','eCkwW7G','pa3dPCoWkmoBWOdcM8kurIhdImolFmohdX5+qvK','W5D3WQFdJ8oG','W47cI8og','W5NcTIldVmkNBM5ckCowjmkgwNNdPCkVWRqrW6ldQeRcSCkSdmogDSoItb5gWPxcKmoyWPtdQ8kmWQ8gW5/dT8oPWOFcHSkwBMtcIstdNsysW5aKWONcJ1JdKCo9DCksxgldU8oPlszzW5FdPb3cUtCrW7RcUSotWPFcSCoSW6pdG8kDWOdcJ8kcWQNcTwRcO8k0WReeWRfeWR4UmSkCWQWYBMVdKCk7W7u2BmozWP4Zg8olBtVdQsddQYpcPCk+W6hcUSkqW6XzW5ZcGmkRWPtcTSk+vaK/WOlcQSoJkqbjiCoVW7eFbmoibCkLqsuNWO3dGvNcO8o1','W4nKW5FcJxO','gZ7dGSkrnG','b8kEoxuWW5LVWRRcUZxdNHddJq','BUIVPoAYTowLQ+I1Uo+9IctcVmoPamkxWQKjqSoGW6xcTaFcOCks','5PEH5zk25BQV5PA75OYM','W6KwWOZcHa','W6NLK6BLUkBdPSoUldNcM8onESoV','jWNdVCoPlW','dSoAW6tdQCorgW','zbvyWRKXmSo6FmkJW4hdTmodWReJzYi','WPn6W5ddLSox','e8oHW6ZcRCou','WPqEkeXcWRanxq','AEwrUow6I8ovWQBcKSkuWQZdMmoNWQldNra','WOdLKztLUQldISocWR4GW4vrddqoW6a','rmk5avD2aSo8','et/dIq','5B6u5zo257U65y6q6zIJ5OIs5yQq772H6i6R5B2V77Yo','oflcPGGN','WOxdImk7sfy','W7GDu0/dIq','tSo2rv/dMq','WOtdT8kpDu4','WPNcM1nlfq','6lAY5yYU5PA45PED','WP7cPt8jW48','WRyOWR/cH8kAWRldIthcSCosoSoTEr3dI1lcRt7cJmkltJ4+W6L8W7BdMLKUW4DOtrecjLRcT8o6W60','WPKyoMzF','Dtr9WQey','xgpdRW','faRcOwS','W6ldJ8k6','W5rXW4pcO3BcN3mjwSoVW6jlW5VdTa','eEITNEAXIUwoGUAvTa','W7NcMSomW6RdIG','zSomuW','W50GWO3dPwu','5lQe5PEu5O6/55ID6k2y5Rk85PA35Rco','uCkpkgT+','jmotfIRcIW','hSkwb8k3ka','W6dcJ8omW5/dJa','W6XGW6/cV3a','gfRcNHhcKW','W6dLVRRMNyNMTBhLIkNLT53NU5/NUidMNQ7cS+IUNoEST+w8VEs4OEAUP+A1GEwkGvm','8lgeOmoq','jmo6gr4','vMxdSa','WP7cNr4pW7u','AmofFNVdMq','W5iKWPFdOxNcGq','o8ouCCoYWQBcKa','WQW5WRZcLSosW7NcQdpcS8ot','tSonWQ3cRJbNFCojWQqZiJ8r','g2/cQa','W7tdTCk9W47dRSkDW7u0','cCownSo4oa','W5GhWPBdG3K','kxddUdVdGa','eZNdMSk1or3dRW','aLlcLrCs','WQSpfJrL','WO8CWRNdRCki','a8oFn8oWpSog','lSoqA8oeWQZcJSkpWQRdK8k0W7RcOf8RWOxdK3u','W5JdKwn4WRuCjmkvWRxdKs4/W6i','ddmYW4WmWP4samkWcG8DW4e','k8kmkq','gMZcSSo2tq','FCoqr1xcISofWPG','EcpcGZyigcBcGW','WQ7ORzFMSP/LPixOTB5RW67cP8kl'],...(function(){return['sNZdM8kFactdMeG','xCkvW5xcMmkO','hmoknCo+pG','mwxcTrJcTq','4P6fc+AEMoEDGEITTUAWIMa','8k6MLCkO','ACkQx8ouWQpdR8ok','DCkVW7/cNSkYWOtcS8kf','DoIUJUAZK+wrJEw7J8ob','W6/cRCoJWRLs','iKVdMG','W4xdOv/dVq','W73cNbhdHmkd','8kY6J8kD','WP1iWRW','WQH6W7FdVSov','cadcVhJcKmkA','pmkSW5FdS2q','ESokvwpdIwj9WPa','kgfdWRTh','oWZdPCogn8kaW4G','W6q2wa','mowtIEw7KNVcOSk5WRNdR8kOWRxcVW','ySk/auzF','W6/dKmkTwdiOWRldRCocWRfcgx49oeWvW6jlWQRcVCkZWQHoyCopWPG6eCocWR4soW','4P6SWOxMN6hOG4hMRyZNOitLPl/NKi3dJW','l2hcVr8h','cCotnCoJl8oC','mmopbYRcGW','cs/dG8kygW','aSoQfSobjG','wCoqzuNdSq','cLVdMdZdPCoFWPrXW55T','rSk1W5NcHmkQ','WO3cJci','4P+yW7NMNBlOGAJMRQJNOAZLPiVNKAS8','fLXKWRfk','vHhdHtNdLmouWRv7W5PT','W7JcUCkVjmoA','nJNdSbfb','C+IUJEAZNUI3HUAxSU+9T+ISQEAGKUAELEE8JUE4UoMeIUIUVW','uMv1WOPFW45f','W553W5/cUa','W7S8s33dK0xcI8ktWPu','o33cHt8PaXNcTSoXgCkD','W4pdTKtdUG','ixjcWRW','AComo8kvihFcU8oXWOiwWORcUmk0W6hdGmoUq8kwzXagW5BdGa','dSokkCo7i8onWPNcISo7WPv5W7xdTgnsWP/dMCoBrHSFnYpdO0fsWQtcQbRdGYqWWOu','kSkgpCkskhZcRq','dSoHW7JdPCoH','e8kSimktjW','8jUuO2y','WP7LVORMNyFMTQ7LIApLT7dNU4dNUR7MNypdLoIVO+EVR+w/T+s4M+AULoA3VowjS3u','44oo5O6m56EX44oM6k2x5yEv6i2r5y6eWP3dMtdcQhqD','lwBcGZxcMG','tSk5bMLYfSoQbCo9WP0','W6tcNSonW6RdJSkzAW','WPldJSkpBey','FSoCv03cPCodWPbo','fatcOgZcGq','W4ZdTLe','CxBdVSoqca','WPlcTCoSWONcKSolWQO8cConemkCsq','hmo5yLtcTq','W4/dJLldHCok','m8knaJxcId5pWQxcLmk/W4bu','xSo+zazV','5Pw05zcu5BUm5PEL5O6L','WQ0BWRyjW5ldTcS','bCk8W4VdLha','xCofBW','j0VcSmoQESoY','hSogD8oyWP8','z8kGW5tcHSkI','nb/dQa9Rhmk3WRWJk8kfWRmFnq','W4NdRutdJ8oo','sKRcP2VcJCkEq8kxW4qzWOZdNSouW4TDW6BcQWJcPGFdPXZcS8oAW6SVWOO','CmkfWRhdK8klswtcN8ksW7ZdGmoM','W4aUvfZdPG','wM5LWOThW5LupCkvaZemW5RdV8kQW4a','WPmzkeT5WRufsW','WRCToXz9yq','W6RcOCo8WRX9ea','8yMLPxW'];}())];}())];}());Iii11l=function(){return l1l1iI;};return Iii11l();};async function Ill1l(IIIIII,lillII){const II11il=Ilil1i,ii1ilI={'BoGtl':II11il(0x24f,'3o82'),'vvqFn':function(lI1ll1,iIiI1){return lI1ll1||iIiI1;},'xETKx':'\x0a---------------------------------------------------\x0a','UeklZ':function(liil1I,i11ii1){return liil1I===i11ii1;},'vLIJP':II11il(0x2c1,'#)ws'),'exaNx':'dotask','jKXiq':function(IlIliI,l1iII1){return IlIliI==l1iII1;},'ZlUVc':function(iiill1,lIli1i){return iiill1!==lIli1i;},'WshNV':II11il(0x297,'HEw0'),'SdCYX':'当前场次已结束，请等待下次活动','RoQDL':function(IIIII1,I1lIlI){return IIIII1+I1lIlI;},'HwkbZ':II11il(0x2a7,'^Mw4'),'wHZLh':function(ii1ill,II1iI){return ii1ill==II1iI;},'GjkAh':II11il(0x2ac,'say@')};try{if(ii1ilI[II11il(0x23c,'wVGg')](ii1ilI[II11il(0x259,'6s9z')],ii1ilI['vLIJP']))switch(IIIIII){case ii1ilI['exaNx']:if(ii1ilI[II11il(0x279,'yZ9c')](lillII[II11il(0x23b,'say@')],0x0)){if(ii1ilI['ZlUVc'](ii1ilI[II11il(0x228,'EJ3C')],II11il(0x1f2,'u5[E'))){const lIli1l=ii1ilI[II11il(0x200,'pd9N')][II11il(0x2e0,'DF^3')]('|');let lillIi=0x0;while(!![]){switch(lIli1l[lillIi++]){case'0':llIlil[II11il(0x275,'9s(!')](II11il(0x213,'fOQ1')+IIlil+II11il(0x2a4,'oG(A')+ii1ilI['vvqFn'](ilI1lI,'无')+'\x0a');continue;case'1':IlI1ii[II11il(0x1e9,'voT)')](ii1ilI[II11il(0x225,'Du(q')]);continue;case'2':I1i11i[II11il(0x2b5,'!dmb')](II11il(0x2c3,'6s9z')+I1i11l+II11il(0x29c,'t5Xg')+ii1ilI[II11il(0x296,'CH*2')](llIlii,'无')+'\x0a');continue;case'3':IiiIll[II11il(0x261,'Xxcx')]('🔧\x20'+IIlii+II11il(0x2b7,'URhJ'));continue;case'4':IlI1il['log'](IilliI);continue;case'5':I1l1Ii[II11il(0x2b3,'jpGA')](ii1ilI['xETKx']);continue;}break;}}else{if(lillII?.[II11il(0x24d,'qWDC')]?.['poolRewardZeroStock']===0x0)console[II11il(0x255,'4qdp')](ii1ilI['SdCYX']);else{let illIi1=lillII?.[II11il(0x28d,'%czp')]?.['successRewards'][0x3][0x0]?.[II11il(0x1f1,'4qdp')]||lillII['rewardsInfo']?.['successRewards'][0x3][0x0]?.[II11il(0x2ca,'Xxcx')]||'空气';console[II11il(0x236,'[PXb')](ii1ilI[II11il(0x1fe,'4qdp')](ii1ilI[II11il(0x22e,'wCy1')],illIi1));}}}else{if(ii1ilI['jKXiq'](lillII['subCode'],0x1f))console['log'](lillII['msg']);else ii1ilI[II11il(0x265,'4qdp')](lillII[II11il(0x26b,'n]wL')],0x57b)?console[II11il(0x288,'fOQ1')](lillII['msg']):console[II11il(0x291,'Du(q')](lillII[II11il(0x2a6,'HEw0')]);}break;}else i1l1I[II11il(0x2b5,'!dmb')](IiilIi['msg']);}catch(liil1i){'dRDIa'!==ii1ilI['GjkAh']?I1iIiI[II11il(0x274,'(qr3')](II11il(0x202,'^Mw4')+li1I1+'\x20请求响应\x20'+(i1ilil['message']||lilIii)):console[II11il(0x1ed,'qDQ4')](II11il(0x1f8,'say@')+IIIIII+II11il(0x2e6,'auTV')+(liil1i[II11il(0x208,'%czp')]||liil1i));}}async function llI1Il(i1l1iI){const iIIil1=Ilil1i,liil1l={'tOFjP':iIIil1(0x223,'^Mw4'),'QNWfW':function(II11li,I1l11i){return II11li+I1l11i;},'iSggc':iIIil1(0x2bb,'(0xd'),'tXhwj':'gzip,\x20deflate,\x20br','dyqxU':'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6','fcqcF':iIIil1(0x20f,'DF^3'),'eCzQH':iIIil1(0x292,'auTV'),'pMJgj':'h5_1.0.0','ORlYY':iIIil1(0x2a9,'say@'),'eFVDZ':iIIil1(0x20c,'oG(A'),'FezDI':iIIil1(0x240,'89$6'),'xSZOi':function(iIIiiI,liiI1i){return iIIiiI<liiI1i;},'AUHll':function(ililIi,lilIIl,ililIl){return ililIi(lilIIl,ililIl);},'TOnrn':iIIil1(0x262,'K^FM'),'pDlqu':iIIil1(0x280,'URhJ'),'cIymD':function(liiI1l,i1l1II){return liiI1l===i1l1II;},'eybOf':iIIil1(0x28e,'qWDC'),'oTlFk':iIIil1(0x281,'PGTg'),'jMAHU':function(i1ill,I1l11l){return i1ill!==I1l11l;},'SKOIZ':iIIil1(0x28a,'#ByN'),'YuIVa':function(lilIIi,i1l1Il){return lilIIi===i1l1Il;},'kOWdZ':'jqQFP','xcKBO':iIIil1(0x23d,'wVGg'),'iEIQH':'\x0a---------------------------------------------------\x0a','VopcN':function(llIli,i1i11l){return llIli||i1i11l;},'KLJip':'CboMV','lLtdN':iIIil1(0x276,'qWDC'),'NeDez':function(i1i11i,II11l1,Iil1lI){return i1i11i(II11l1,Iil1lI);},'YrItd':function(IiiliI,iii1iI){return IiiliI(iii1iI);},'AQjKd':function(llIll,il1iII){return llIll||il1iII;},'vAPRz':iIIil1(0x2bf,'(0xd')};if($['runEnd']||$[iIIil1(0x2d1,'HEw0')])return;let lI1lii='',Iiili1='',Iil1l1=iIIil1(0x294,'H85u');switch(i1l1iI){case'dotask':Iiili1={'completionFlag':!![],'sourceCode':iIIil1(0x2b6,'CH*2'),'encryptProjectId':$[iIIil1(0x22f,'%czp')],'encryptAssignmentId':$[iIIil1(0x256,'qWDC')]},lI1lii=iIIil1(0x278,'eaww')+encodeURIComponent(JSON[iIIil1(0x272,'t5Xg')](Iiili1));break;default:console[iIIil1(0x274,'(qr3')](iIIil1(0x2e2,'t5Xg')+i1l1iI);return;}const i1i11I={'url':lI1lii,'headers':{'Accept':iIIil1(0x1f7,'!dmb'),'Accept-Encoding':liil1l['tXhwj'],'Accept-Language':liil1l['dyqxU'],'Connection':iIIil1(0x290,'t5Xg'),'Content-Type':liil1l[iIIil1(0x1e8,'H85u')],'Cookie':IlIli1,'Origin':liil1l['eCzQH'],'Referer':liil1l['eCzQH'],'x-rp-client':liil1l[iIIil1(0x2d3,'qWDC')],'Sec-Fetch-Dest':liil1l[iIIil1(0x2da,'UKtY')],'Sec-Fetch-Mode':liil1l['eFVDZ'],'Sec-Fetch-Site':liil1l[iIIil1(0x2e1,'#)ws')],'User-Agent':$['UA']},'timeout':0x7530},il1iIl=0x1;let iii1ii=0x0,il1iIi=null,iii1il=![];while(liil1l[iIIil1(0x2bc,'9YBb')](iii1ii,il1iIl)){iii1ii>0x0&&await $['wait'](0x3e8);const {err:iilli,res:IlllIl,data:II11lI}=await liil1l[iIIil1(0x1f0,'Du(q')](ii1iii,i1i11I,Iil1l1);if(iilli){if(liil1l[iIIil1(0x212,'89$6')]===liil1l[iIIil1(0x2aa,'wCy1')])lilIl1[iIIil1(0x24a,'(0xd')](i1l1ii[iIIil1(0x20d,'u5[E')],iIIil1(0x215,'Xxcx')),i1l1['exit'](0x1);else{if(liil1l[iIIil1(0x211,'eaww')](typeof iilli,liil1l[iIIil1(0x28b,'qDQ4')])&&iilli[iIIil1(0x284,'!dmb')](liil1l[iIIil1(0x222,'URhJ')])){if(liil1l['jMAHU'](liil1l[iIIil1(0x21f,'oFJj')],iIIil1(0x1f9,'X4q%'))){i1ili1[iIIil1(0x242,'KFh4')](iIIil1(0x2ae,'^Mw4'));return;}else il1iIi=i1l1iI+iIIil1(0x207,'KFh4');}else{const Ilil1l=IlllIl?.[iIIil1(0x25c,'PGTg')];if(Ilil1l){if([0x193,0x1ed][iIIil1(0x25b,'4qdp')](Ilil1l))il1iIi=i1l1iI+iIIil1(0x26d,'9s(!')+Ilil1l+'）',iii1il=!![];else[0x190,0x194][iIIil1(0x230,'(qr3')](Ilil1l)?il1iIi=i1l1iI+'\x20请求配置参数错误，请联系开发者进行反馈（Response\x20code\x20'+Ilil1l+'）':il1iIi=i1l1iI+iIIil1(0x299,'X4q%')+Ilil1l+'）';}else il1iIi=i1l1iI+iIIil1(0x2dd,'!dmb')+(iilli[iIIil1(0x23e,'URhJ')]||iilli);}iii1ii++;}}else{const iIIiii=iiilii[iIIil1(0x2d6,'EJ3C')](IlllIl),iilll=![];if(iilll){if(liil1l[iIIil1(0x2be,'89$6')](liil1l['kOWdZ'],'RxHDg'))llIliI='❌\x20'+I1l1I1+iIIil1(0x24e,'(qr3')+I1i111[iIIil1(0x218,'(0xd')],ilI1li[iIIil1(0x2cc,'#)ws')](iIIil1(0x1ec,'voT)')+IIliI+iIIil1(0x29b,'t5Xg')+ilI1ll(Iillii||liil1l[iIIil1(0x2b2,'33j]')])),IlI1iI++;else{const IlllIi=liil1l['xcKBO'][iIIil1(0x29d,'auTV')]('|');let iIIiil=0x0;while(!![]){switch(IlllIi[iIIiil++]){case'0':console[iIIil1(0x26c,'t5Xg')](liil1l[iIIil1(0x1eb,'^Mw4')]);continue;case'1':console[iIIil1(0x21c,'oG(A')](liil1l[iIIil1(0x24c,')w7p')]);continue;case'2':console[iIIil1(0x21c,'oG(A')]('🔧\x20'+i1l1iI+iIIil1(0x1f5,'fOQ1')+liil1l['VopcN'](II11lI,'无')+'\x0a');continue;case'3':console[iIIil1(0x237,'uQUz')](i1i11I);continue;case'4':console['log'](iIIil1(0x233,'qWDC')+i1l1iI+iIIil1(0x2a3,'EJ3C')+liil1l['VopcN'](iIIiii,'无')+'\x0a');continue;case'5':console[iIIil1(0x1f4,'wCy1')](iIIil1(0x2e3,')w7p')+i1l1iI+'\x20请求参数');continue;}break;}}}try{if(liil1l[iIIil1(0x271,'u5[E')]===liil1l['lLtdN']){let I1iIIi=i1iliI?.['rewardsInfo']?.['successRewards'][0x3][0x0]?.[iIIil1(0x2e5,'pd9N')]||I1iIii[iIIil1(0x266,'Xxcx')]?.['successRewards'][0x3][0x0]?.[iIIil1(0x1ff,'wksC')]||'空气';IllII1[iIIil1(0x285,'wVGg')](liil1l[iIIil1(0x2d0,'wksC')]('开启红包雨成功，获得：',I1iIIi));}else{let I1iIIl=JSON[iIIil1(0x21b,'7qHI')](II11lI);liil1l['NeDez'](Ill1l,i1l1iI,I1iIIl);break;}}catch(lI1IIl){il1iIi='❌\x20'+i1l1iI+'\x20接口响应数据解析失败:\x20'+lI1IIl[iIIil1(0x210,'89$6')],console['log'](iIIil1(0x245,'PGTg')+i1l1iI+'\x20=>\x20'+liil1l[iIIil1(0x2c0,'CH*2')](String,liil1l['AQjKd'](II11lI,iIIil1(0x29a,'33j]')))),iii1ii++;}iii1il=![];}}if(iii1ii>=il1iIl){if(iIIil1(0x22b,'oG(A')!==liil1l[iIIil1(0x2a8,'X4q%')]){const iii1lI=liil1l['iSggc'];return{'err':iii1lI,'res':null,'data':null};}else console[iIIil1(0x226,'URhJ')](il1iIi),iii1il&&($[iIIil1(0x254,'X4q%')]=!![],$[iIIil1(0x2a5,'9YBb')]&&$[iIIil1(0x269,'9s(!')]['fix'](il1iIi));}}async function ii1iii(i1ilI1,Iiilii=Ilil1i(0x25a,'DF^3')){const IlllII=Ilil1i,Iil1li={'tLiCN':IlllII(0x214,'^Mw4'),'cwcZM':function(Iiilil,Iil1ll){return Iiilil(Iil1ll);},'ucmkN':function(iillI,lI1III){return iillI===lI1III;},'pJQTX':IlllII(0x277,'yZ9c'),'LAcMO':IlllII(0x248,'#)ws'),'BsgLm':function(IIliIi,IllIiI){return IIliIi===IllIiI;},'wtIay':IlllII(0x249,'oG(A'),'TSdHf':IlllII(0x2a0,'t5Xg'),'OiXIF':IlllII(0x27b,'DF^3')};if(Iiilii===Iil1li[IlllII(0x2d2,'X4q%')]){if(Iil1li['BsgLm'](Iil1li['wtIay'],Iil1li[IlllII(0x2a1,')w7p')]))ll1ii[IlllII(0x1f3,'auTV')]=!![],IIli11['message']&&IIll1[IlllII(0x289,'1h3y')][IlllII(0x2c5,'jpGA')](ll1il);else return new Promise(async I1l111=>{const I1il1I=IlllII;$[I1il1I(0x2b4,'7qHI')](i1ilI1,(IIii1l,I1iIII,liiI11)=>{I1l111({'err':IIii1l,'res':I1iIII,'data':liiI11});});});}else{if(Iil1li[IlllII(0x1fc,'HEw0')](Iiilii,IlllII(0x250,'K^FM')))return new Promise(async ililI1=>{const lI1l1I=IlllII,IIii1i={'jazQo':function(i1ili,Iiill1){const II111=iii1II;return Iil1li[II111(0x27e,'UKtY')](i1ili,Iiill1);}};if(Iil1li[lI1l1I(0x27c,'1h3y')](lI1l1I(0x216,'#)ws'),Iil1li['pJQTX']))$['get'](i1ilI1,(I1iII1,lilII1,iill1)=>{IIii1i['jazQo'](ililI1,{'err':I1iII1,'res':lilII1,'data':iill1});});else{IiilI1[lI1l1I(0x26c,'t5Xg')](Iil1li[lI1l1I(0x2af,'1h3y')]);return;}});else{const IIliIl=Iil1li[IlllII(0x205,'wVGg')];return{'err':IIliIl,'res':null,'data':null};}}}function i11iil(II11ll,liiI1I){const lill11=Ilil1i,ililII={'fFoEt':function(lI1II1,i1ilII){return lI1II1*i1ilII;}};return Math[lill11(0x2ce,'DF^3')](ililII[lill11(0x2cf,'yZ9c')](Math[lill11(0x2c9,'EJ3C')](),liiI1I-II11ll))+II11ll;}function Ill1i(iIIii1){const liI1i1=Ilil1i,IllIi1={'npWHb':function(lilIII,Ii1ilI){return lilIII(Ii1ilI);},'EXREW':function(II11i1,iliIil){return II11i1===iliIil;},'AzvXl':liI1i1(0x1fd,'DF^3'),'srJbU':liI1i1(0x283,'wVGg'),'CmxSB':function(iliIii,lill1i){return iliIii===lill1i;},'coqAS':liI1i1(0x219,'say@'),'ttHEt':function(il1li,iIIill){return il1li(iIIill);},'qCGwy':liI1i1(0x25e,'9s(!'),'eClRE':liI1i1(0x295,'^Mw4')};return new Promise(iilii=>{const I11i11=liI1i1;if(IllIi1['qCGwy']===I11i11(0x241,'EJ3C'))Iii11I=Iil1II+I11i11(0x251,'89$6')+iIIl1I+'）',I1iIli=!![];else{const iilil={'url':''+iIIii1,'timeout':0x2710,'headers':{'User-Agent':IllIi1[I11i11(0x206,'KFh4')]}};$[I11i11(0x260,'yZ9c')](iilil,async(Ill11l,il1ll,i1ilIi)=>{const Iil1il=I11i11,lill1l={'Wqopz':function(l1l1i1,i1iiI){const I1llII=iii1II;return IllIi1[I1llII(0x293,'6s9z')](l1l1i1,i1iiI);}};try{if(IllIi1[Iil1il(0x26f,'89$6')](IllIi1[Iil1il(0x252,'3o82')],IllIi1[Iil1il(0x21d,'jpGA')])){if(Ill11l){}else i1ilIi?i1ilIi=JSON[Iil1il(0x2b8,'(0xd')](i1ilIi)||'':console[Iil1il(0x285,'wVGg')](IllIi1[Iil1il(0x263,'CH*2')]);}else IIli1=II1liI+'\x20请求失败\x20=>\x20'+(IlI1i1[Iil1il(0x224,'3o82')]||l1lIl1);}catch(llI11I){IllIi1[Iil1il(0x23f,'#ByN')](IllIi1[Iil1il(0x2b1,'(qr3')],Iil1il(0x24b,'wVGg'))?($[Iil1il(0x231,'qWDC')](llI11I,il1ll),i1ilIi=null):IiiIil['post'](IiiIii,(iii1li,Iil1i1,IIii11)=>{const I11i1i=Iil1il;lill1l[I11i1i(0x258,'1h3y')](liliI,{'err':iii1li,'res':Iil1i1,'data':IIii11});});}finally{IllIi1[Iil1il(0x2c6,'1h3y')](iilii,i1ilIi);}});}});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
