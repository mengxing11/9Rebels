/*
清空购物车

jd_clean_cart_pin  // 清空定义PIN账号，多个用 & 隔开,不填清空全部账号

cron:1 1 1 1 *
============Quantumultx===============
[task_local]
#清空购物车
1 1 1 1 * jd_clean_cart.js, tag=清空购物车, enabled=true

*/

const $ = new Env('清空购物车')
var iｉl='jsjiami.com.v7';const iIIilI=iii1II;(function(I1il1l,lI1l1l,IIliII,iiliI,Ill11I,I1il1i,IliIIi){return I1il1l=I1il1l>>0x4,I1il1i='hs',IliIIi='hs',function(lI1l1i,i1iil,llI11l,I1llIl,i1iii){const Ii1iii=iii1II;I1llIl='tfi',I1il1i=I1llIl+I1il1i,i1iii='up',IliIIi+=i1iii,I1il1i=llI11l(I1il1i),IliIIi=llI11l(IliIIi),llI11l=0x0;const I1llIi=lI1l1i();while(!![]&&--iiliI+i1iil){try{I1llIl=-parseInt(Ii1iii(0x150,'Ra@B'))/0x1+-parseInt(Ii1iii(0x1b6,'AzS]'))/0x2+parseInt(Ii1iii(0x14b,'BXXO'))/0x3+parseInt(Ii1iii(0x105,'@Qyj'))/0x4*(parseInt(Ii1iii(0x155,'jC4h'))/0x5)+parseInt(Ii1iii(0x15a,'Sc)U'))/0x6*(-parseInt(Ii1iii(0x1b8,'JVOL'))/0x7)+parseInt(Ii1iii(0x172,'7SoP'))/0x8+parseInt(Ii1iii(0x180,'p&&j'))/0x9*(parseInt(Ii1iii(0xfa,'e75h'))/0xa);}catch(IIii1I){I1llIl=llI11l;}finally{i1iii=I1llIi[I1il1i]();if(I1il1l<=iiliI)llI11l?Ill11I?I1llIl=i1iii:Ill11I=i1iii:llI11l=i1iii;else{if(llI11l==Ill11I['replace'](/[pkNWhCeqRGPTnDQbuFxrV=]/g,'')){if(I1llIl===i1iil){I1llIi['un'+I1il1i](i1iii);break;}I1llIi[IliIIi](i1iii);}}}}}(IIliII,lI1l1l,function(llI11i,i1iIi1,l1l1il,I11i1I,iliIi1,l1l1ii,Il1i1I){return i1iIi1='\x73\x70\x6c\x69\x74',llI11i=arguments[0x0],llI11i=llI11i[i1iIi1](''),l1l1il=`\x72\x65\x76\x65\x72\x73\x65`,llI11i=llI11i[l1l1il]('\x76'),I11i1I=`\x6a\x6f\x69\x6e`,(0x14f528,llI11i[I11i1I](''));});}(0xc80,0xa2582,Iii11l,0xca),Iii11l)&&(iｉl=iIIilI(0x1d0,'ojx*'));const ii1iil=require(iIIilI(0x1a7,'@Qyj')),lllI1l=require('./utils/Rebels_sendJDNotify'),i11iii=require(iIIilI(0x22c,'KCxY')),llI1Ii=process[iIIilI(0x174,'0RQQ')]['jd_clean_cart_pin']?process[iIIilI(0x16e,'@Qyj')][iIIilI(0x1e1,'KCxY')][iIIilI(0x149,'#y0T')]('&'):'',lllI1i=![];console[iIIilI(0xf0,'Sc)U')](''),console[iIIilI(0x20f,'7SoP')](iIIilI(0x1d3,'A*5C')+$['name']+'变量说明=========='),console[iIIilI(0x179,'j^r5')](scriptNameWithoutExtension+iIIilI(0x110,'A*5C')),console[iIIilI(0x144,'*&A@')](iIIilI(0x106,'ssOw')+$[iIIilI(0x18e,'ns!A')]+iIIilI(0x199,'3$[Z')),console['log']('');function iii1II(_0x3f4ff7,_0x34b907){const _0x3290f4=Iii11l();return iii1II=function(_0x268be7,_0x2dd4da){_0x268be7=_0x268be7-0xf0;let _0x58916f=_0x3290f4[_0x268be7];if(iii1II['Ykenrx']===undefined){var _0x428ede=function(_0x302562){const _0x21c7c6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x45330d='',_0x313729='';for(let _0x275be2=0x0,_0x44358f,_0x403003,_0x13e16d=0x0;_0x403003=_0x302562['charAt'](_0x13e16d++);~_0x403003&&(_0x44358f=_0x275be2%0x4?_0x44358f*0x40+_0x403003:_0x403003,_0x275be2++%0x4)?_0x45330d+=String['fromCharCode'](0xff&_0x44358f>>(-0x2*_0x275be2&0x6)):0x0){_0x403003=_0x21c7c6['indexOf'](_0x403003);}for(let _0x1b953a=0x0,_0x4865af=_0x45330d['length'];_0x1b953a<_0x4865af;_0x1b953a++){_0x313729+='%'+('00'+_0x45330d['charCodeAt'](_0x1b953a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x313729);};const _0x39055e=function(_0x29799c,_0x3eba2f){let _0x2e69b0=[],_0x5db6f4=0x0,_0x17eb6d,_0x468016='';_0x29799c=_0x428ede(_0x29799c);let _0x283c6d;for(_0x283c6d=0x0;_0x283c6d<0x100;_0x283c6d++){_0x2e69b0[_0x283c6d]=_0x283c6d;}for(_0x283c6d=0x0;_0x283c6d<0x100;_0x283c6d++){_0x5db6f4=(_0x5db6f4+_0x2e69b0[_0x283c6d]+_0x3eba2f['charCodeAt'](_0x283c6d%_0x3eba2f['length']))%0x100,_0x17eb6d=_0x2e69b0[_0x283c6d],_0x2e69b0[_0x283c6d]=_0x2e69b0[_0x5db6f4],_0x2e69b0[_0x5db6f4]=_0x17eb6d;}_0x283c6d=0x0,_0x5db6f4=0x0;for(let _0x4094f7=0x0;_0x4094f7<_0x29799c['length'];_0x4094f7++){_0x283c6d=(_0x283c6d+0x1)%0x100,_0x5db6f4=(_0x5db6f4+_0x2e69b0[_0x283c6d])%0x100,_0x17eb6d=_0x2e69b0[_0x283c6d],_0x2e69b0[_0x283c6d]=_0x2e69b0[_0x5db6f4],_0x2e69b0[_0x5db6f4]=_0x17eb6d,_0x468016+=String['fromCharCode'](_0x29799c['charCodeAt'](_0x4094f7)^_0x2e69b0[(_0x2e69b0[_0x283c6d]+_0x2e69b0[_0x5db6f4])%0x100]);}return _0x468016;};iii1II['eovcxG']=_0x39055e,_0x3f4ff7=arguments,iii1II['Ykenrx']=!![];}const _0x33da54=_0x3290f4[0x0],_0x44aa47=_0x268be7+_0x33da54,_0x39fa00=_0x3f4ff7[_0x44aa47];return!_0x39fa00?(iii1II['njiZwH']===undefined&&(iii1II['njiZwH']=!![]),_0x58916f=iii1II['eovcxG'](_0x58916f,_0x2dd4da),_0x3f4ff7[_0x44aa47]=_0x58916f):_0x58916f=_0x39fa00,_0x58916f;},iii1II(_0x3f4ff7,_0x34b907);}let li1i1l='';const II1i1=Object[iIIilI(0x1c8,'pT2o')](ii1iil)['map'](illIii=>ii1iil[illIii])['filter'](ii1il1=>ii1il1);!II1i1[0x0]&&($['msg']($[iIIilI(0x17b,'XoR3')],iIIilI(0x201,'JzO6')),process['exit'](0x1));!(async()=>{const il1l1=iIIilI,lI1llI={'VMbnk':function(Ill1I,i11iiI){return Ill1I<i11iiI;},'FwEjI':function(lIli11,lllI1I){return lIli11+lllI1I;},'khtbD':function(lillI1,IlIlii){return lillI1(IlIlii);},'AzWfY':il1l1(0x13a,')Mrn'),'sSpTw':function(i1l1i1){return i1l1i1();},'idbYT':function(liil11,iiillI){return liil11!==iiillI;},'bpdaC':'wQWEK','OAFLE':function(l1l111){return l1l111();},'Afnwb':il1l1(0x125,'j^r5')};lllI1l[il1l1(0x1ef,'%lP]')]({'title':$['name']});for(let l1iIII=0x0;lI1llI[il1l1(0x212,'0A47')](l1iIII,II1i1[il1l1(0x227,'eXy5')]);l1iIII++){$['index']=lI1llI[il1l1(0x12f,'pT2o')](l1iIII,0x1),li1i1l=II1i1[l1iIII],i11iii['setCookie'](li1i1l),$[il1l1(0x19b,'bixr')]=lI1llI[il1l1(0x19c,'KlHN')](decodeURIComponent,i11iii['getCookieValue'](li1i1l,il1l1(0x1cc,'aiZf'))),$['UA']=i11iii[il1l1(0x13d,'A*5C')]($[il1l1(0x18a,'@mBR')]),$[il1l1(0x12c,'2QS1')]=i11iii['genUuid'](lI1llI['AzWfY']),$['message']=lllI1l['create']($[il1l1(0x186,'0NVj')],$[il1l1(0x1d4,'0RQQ')]),$['nickName']='';if(llI1Ii){if(llI1Ii[il1l1(0x1de,'#I#r')](lI1llI['khtbD'](encodeURIComponent,$[il1l1(0x165,'j^r5')]))){console[il1l1(0x126,'BXXO')]('\x0a******开始【京东账号'+$['index']+'】'+($['nickName']||$['UserName'])+il1l1(0x1e5,'$V)m')),await lI1llI[il1l1(0x166,'JVOL')](lI1lll),i11iii[il1l1(0x192,'$kCE')]();if($['runEnd'])break;await $['wait'](0x3e8);}else continue;}else{if(lI1llI[il1l1(0x1d8,'woyd')](lI1llI['bpdaC'],lI1llI[il1l1(0x103,'ssOw')])){IiilI1['log'](il1l1(0x1d1,'IlzG'));return;}else{console['log'](il1l1(0x154,'ssOw')+$[il1l1(0x188,'JVOL')]+'】'+($[il1l1(0x11f,'!F($')]||$['UserName'])+il1l1(0x1c3,'^zu0')),await lI1llI[il1l1(0x21b,'@mBR')](lI1lll),i11iii['unsetCookie']();if($[il1l1(0x15c,'woyd')])break;await $[il1l1(0x145,'*&A@')](0x3e8);}}}const illIil=lllI1l[il1l1(0x1b7,'ABqo')]();illIil&&(console['log'](il1l1(0x164,'ojx*')+illIil[il1l1(0x140,'ABqo')](/：/g,lI1llI[il1l1(0x223,'7SoP')])),lllI1i&&await lllI1l[il1l1(0x173,'ojx*')]());})()['catch'](IlIlil=>$[iIIilI(0x185,'aiZf')](IlIlil))[iIIilI(0x10e,'Sc)U')](()=>$[iIIilI(0x195,'XoR3')]());async function lI1lll(){const Ii1iil=iIIilI,lIli1I={'UTErP':Ii1iil(0x147,'jC4h'),'OGhqR':Ii1iil(0x205,'IlzG'),'FJgaC':function(lllI11,I1lIll){return lllI11||I1lIll;},'hApFl':function(I1lIli,II1ii){return I1lIli===II1ii;},'HWyXm':'boolean','DAoDa':function(IIIIII,lillII){return IIIIII===lillII;},'HGmrY':Ii1iil(0x1a0,'KlHN'),'cUjdU':function(ii1ilI,lI1ll1){return ii1ilI===lI1ll1;},'swljG':'OvQGZ','vgEmn':Ii1iil(0xfb,'^zu0'),'AGscl':function(iIiI1,liil1I){return iIiI1(liil1I);},'QIcST':'cartCheckAll','dAOhd':function(i11ii1,IlIliI){return i11ii1>IlIliI;},'zOOUv':Ii1iil(0x1ff,'j^r5'),'SQFVm':'空购物车','oAhvc':Ii1iil(0x1b4,'*&A@')},II1il=await i11iii[Ii1iil(0x1f0,'pT2o')](li1i1l);if(!II1il&&lIli1I[Ii1iil(0x1da,'#y0T')](typeof II1il,lIli1I[Ii1iil(0x21d,'$V)m')])){if(lIli1I[Ii1iil(0x191,'0A47')](lIli1I[Ii1iil(0x1c7,')Mrn')],lIli1I['HGmrY'])){console['log']('账号无效');return;}else IlI11[Ii1iil(0x1a2,'$V)m')](iIIIIl[Ii1iil(0xf3,'Sc)U')]);}try{if(lIli1I[Ii1iil(0x1e4,'KlHN')](lIli1I[Ii1iil(0x22a,'p&&j')],lIli1I[Ii1iil(0x1d6,'E@eT')]))I1l1I1=I1i111+Ii1iil(0x216,'7g7*')+ilI1li+'）';else{$[Ii1iil(0x1a3,'E@eT')]=[],await lIli1I['AGscl'](iiiliI,lIli1I[Ii1iil(0x128,'p&&j')]);if(lIli1I[Ii1iil(0x20d,'eXy5')]($[Ii1iil(0x21f,'KCxY')][Ii1iil(0x15b,'%lP]')],0x0))console[Ii1iil(0xf0,'Sc)U')](Ii1iil(0x197,'7SoP')+$[Ii1iil(0x1e9,'73[f')][Ii1iil(0xf2,'2QS1')]+Ii1iil(0x112,']UCi')),$[Ii1iil(0xfd,'@Qyj')][Ii1iil(0x208,'XoR3')](Ii1iil(0x1ab,'#y0T')+$['TheSkus'][Ii1iil(0x13c,'jC4h')]+Ii1iil(0x19a,'Ra@B')),await lIli1I[Ii1iil(0x1ae,'3$[Z')](iiiliI,'cartRemove');else{if(Ii1iil(0xf6,'3$[Z')!==Ii1iil(0xf9,'SP3Y')){console['log'](lIli1I[Ii1iil(0x111,')Mrn')]),$['message'][Ii1iil(0x163,'e75h')](lIli1I[Ii1iil(0x113,'UMf6')]);return;}else{const IIIII1={'WEFEU':function(I1lIlI,ii1ill){return I1lIlI(ii1ill);}};return new IllI1i(async II1iI=>{const Ilil1i=Ii1iil;IllI1l[Ilil1i(0x131,')Mrn')](i11I1i,(llI1II,lIli1l,lillIi)=>{const iili1=Ilil1i;IIIII1[iili1(0x204,'@Qyj')](II1iI,{'err':llI1II,'res':lIli1l,'data':lillIi});});});}}}}catch(illIi1){if(lIli1I['cUjdU'](lIli1I[Ii1iil(0x101,'ojx*')],lIli1I[Ii1iil(0x119,'0A47')]))console[Ii1iil(0x152,'3$[Z')](illIi1[Ii1iil(0x200,']UCi')]);else{const liil1i=lIli1I['UTErP'][Ii1iil(0x1b9,'JVOL')]('|');let lI1lil=0x0;while(!![]){switch(liil1i[lI1lil++]){case'0':IliI1i[Ii1iil(0x1c5,'%lP]')](Ii1iil(0x206,'0RQQ')+ll1ii+Ii1iil(0x15e,'aiZf')+(IIli11||'无')+'\x0a');continue;case'1':ll1il[Ii1iil(0x193,'CTMB')](Ii1iil(0x109,'p&&j')+IiiIiI+'\x20请求参数');continue;case'2':ll1li[Ii1iil(0x161,'^zu0')](lIli1I[Ii1iil(0x1ad,'0NVj')]);continue;case'3':lliiii[Ii1iil(0x1a6,'2QS1')](lIli1I['OGhqR']);continue;case'4':lilii[Ii1iil(0x20f,'7SoP')](l1iiI);continue;case'5':IllIII['log'](Ii1iil(0x198,'ns!A')+ii1li+Ii1iil(0xfe,'*&A@')+lIli1I[Ii1iil(0x20a,'0A47')](IIll1,'无')+'\x0a');continue;}break;}}}}function iIiII(i1l1iI){const II11ii=iIIilI,liil1l={'PvXdF':function(lI1lii,Iiili1){return lI1lii(Iiili1);},'poIXP':function(Iil1l1,i1i11I){return Iil1l1===i1i11I;},'OeufE':II11ii(0x14d,'ABqo'),'lPZip':function(il1iIl,iii1ii){return il1iIl>iii1ii;}};for(const il1iIi of i1l1iI){if(liil1l[II11ii(0x130,'KCxY')](liil1l[II11ii(0x1f4,'7SoP')],liil1l[II11ii(0x1b1,'@mBR')])){if(liil1l['poIXP'](il1iIi[II11ii(0x182,'JzO6')],0x1))il1iIi?.[II11ii(0x1b5,'bixr')]?.[II11ii(0x12a,'aiZf')]&&il1iIi?.[II11ii(0x107,'!F($')]?.['skuUuid']&&il1iIi?.['item']?.['Id']&&$[II11ii(0x18d,'IlzG')][II11ii(0x108,'Ra@B')]({'num':il1iIi[II11ii(0x11d,'BXXO')]['Num'],'skuUuid':il1iIi['item']['skuUuid'],'useUuid':![],'Id':il1iIi[II11ii(0x207,'#I#r')]['Id']});else{if(liil1l[II11ii(0x138,'Ra@B')](il1iIi['itemType'],0x4))continue;else il1iIi?.[II11ii(0x13e,'e75h')]?.[II11ii(0x1f8,'woyd')]&&il1iIi?.['item']?.[II11ii(0x17c,'A*5C')]?.[II11ii(0x19e,'aiZf')]&&liil1l[II11ii(0x15d,'%lP]')](il1iIi?.[II11ii(0x1b3,'CTMB')]?.[II11ii(0x1c0,'^zu0')]?.['length'],0x0)&&iIiII(il1iIi['item'][II11ii(0x1a4,'CTMB')]);}}else I1ilIi='❌\x20'+IiiiI+II11ii(0x14c,'KCxY')+llIlli[II11ii(0x18c,'e75h')],llIlll[II11ii(0x152,'3$[Z')](II11ii(0x215,'7SoP')+lliii1+II11ii(0x1dd,'3$[Z')+liil1l['PvXdF'](Iiii1,lIIili||II11ii(0x228,'woyd'))),IiiIil++;}}async function iil1lI(II11li,I1l11i){const Iil1iI=iIIilI,iIIiiI={'BTOmJ':function(liiI1i,ililIi){return liiI1i(ililIi);},'FMZJe':function(lilIIl,ililIl){return lilIIl>ililIl;},'REuYL':Iil1iI(0x1c6,'0A47'),'yQySL':function(liiI1l,i1l1II){return liiI1l!==i1l1II;},'TqRqm':'RdZjL','uxBHw':Iil1iI(0x10f,'KCxY'),'vkPFX':'清空购物车成功','LDelg':Iil1iI(0x221,'0RQQ'),'vCRaI':'QbTaF','RgJkw':Iil1iI(0x12e,'%lP]'),'rvRyM':'清空购物车失败'};try{switch(II11li){case'cartCheckAll':if(I1l11i[Iil1iI(0x1f9,')Mrn')]==='0'){if(I1l11i?.[Iil1iI(0x162,'bixr')]?.[Iil1iI(0x1c1,'eXy5')]&&iIIiiI[Iil1iI(0x187,'@mBR')](I1l11i?.['cartInfo']?.['vendors']?.[Iil1iI(0x17f,'JzO6')],0x0)){if(iIIiiI[Iil1iI(0x1bd,'ns!A')]!==Iil1iI(0x1cd,'eXy5'))for(const i1ill of I1l11i[Iil1iI(0x190,'#y0T')][Iil1iI(0x14e,'7g7*')]){iIIiiI[Iil1iI(0xf7,'Sc)U')](iIIiiI[Iil1iI(0x14f,'IlzG')],Iil1iI(0x1ea,'Ra@B'))?iIiII(i1ill[Iil1iI(0x1be,'p&&j')]):lI1Iil['TheSkus']['push']({'num':lilIiI['item'][Iil1iI(0x1bc,'73[f')],'skuUuid':i1l1I[Iil1iI(0x1ee,'7g7*')][Iil1iI(0x16f,'eXy5')],'useUuid':![],'Id':IiilIi['item']['Id']});}else ii1l1[Iil1iI(0x18b,'73[f')](lIIill),I11iIi&&(l1iIi[Iil1iI(0x139,')Mrn')]=!![],l1l11i['message']&&iIli1I[Iil1iI(0x10d,'!F($')][Iil1iI(0x194,'#I#r')](Iiil1));}}else{if(I1l11i?.[Iil1iI(0x1df,'0A47')]){console['log'](I1l11i[Iil1iI(0x222,'7GUh')]),$[Iil1iI(0x210,'E@eT')][Iil1iI(0x1f7,'73[f')](I1l11i['msg']);return;}else iIIiiI['yQySL'](Iil1iI(0x114,'eXy5'),Iil1iI(0x176,'SP3Y'))?console[Iil1iI(0x167,'0RQQ')]('❓'+II11li+'\x20'+JSON['stringify'](I1l11i)):lIIii1=ll1i1+'\x20请求失败\x20=>\x20'+(IIli1i[Iil1iI(0x120,'%lP]')]||I1iIi1);}break;case Iil1iI(0x177,'pT2o'):I1l11i[Iil1iI(0x1d5,'CTMB')]==='0'?(console['log'](iIIiiI['uxBHw']),$['message'][Iil1iI(0xf1,'73[f')](iIIiiI['vkPFX'])):iIIiiI['LDelg']===iIIiiI[Iil1iI(0x218,'ssOw')]?iIIiiI['BTOmJ'](ii1I11,{'err':liIi1,'res':lI11II,'data':l1llI1}):(console[Iil1iI(0x159,'bixr')](iIIiiI[Iil1iI(0x122,'7g7*')]),$[Iil1iI(0x10d,'!F($')][Iil1iI(0x1a9,'$kCE')](iIIiiI[Iil1iI(0x135,'0NVj')]));break;}}catch(i1i11l){console['log'](Iil1iI(0x134,'7g7*')+II11li+Iil1iI(0x183,'3$[Z')+(i1i11l['message']||i1i11l));}}function Iii11l(){const lill11=(function(){return[...[iｉl,'PVRjhGseNbjQxFiaCGmqirk.pQcnoeumTW.NDWv7==','WQtcS3tcUKG','W6tdRmofW4Hw','W5RcVCk4W5W','s3tcTWm3','WPZdKCo7WPOhWO8hoCoku8ovW73cVCkyAbbt','W5BdSuOFaG','dmkAWPpdMmoxW7y','iSkdwY7dLq','WOZcQKRdMSou','WPVcIg3dM8o5ESkP','WQTpW4StW6hcIsWXc8oLi8k+W6ro','6lEf5y6H5Pwc5PsH','WPPpW4pcVq','imkLWOqTW4j2BmoUprq','W6xdJfyOjSo4jgO','WR7cRZX4','sZVdRCoEW4e','WRr0W7RcN8kK','WQiUWPRdLcC','WQ5wECohisxcVmowW7FcMuBcVa','W7tdKX/dSSkv','W73dRCoFW7z6','W6dcSCo2vCkR','tePAW70','W7qoyqjIWPnEsW','WRZcQfW','cCkxWPBdUCos','gqhdImo7WOBdGeZdRSk1WPVcImotz8kpCqNdTG','ECoWWO7cNWq','l3BdNYldSq','smomW4eaW7m','qIRcSw3cI3hcNa','WQfVW6BcHSks','WOrxDmoFms/cRCki','WQCRW4yCWQm','rNVcJCk9Fwf2','m8ohW5lcTJu','u+wsQow4G8oBWOxdIKBdQCkpW5JdLmkFmW','zCocW5HcWRy','wLHq','BwJcTdS','W4dcRmkoWPhcU8kJ','W5BcVCk1W6pcL1VcKmkZnSkOmHP0WOm','arpdLSomWQe','W7BcRSoXFmocW790W7H5lSo+WPa3E8kBWRKC','qmoqW402W5u','CCoDWPRcGau','WRTxWOxcM3u','W6VdUmkj','DhRcKa','WQi+WP3dOaa','W4/dHmomW58','j3LwEJ/cGJ7dTev2','W7pdPXVdSSkvfCky','ishdPmoEnq','v8omWORcIW','W7ZORkRMSPtLPlFOTl/cISoZW65p','6lEu54Mj6l+x56Q056Qp5AE95lQm77645yYO6yka6yoJ5zk9W4K','WObCzmoajsZcRq','44kx5O2h56Eu44c06kYj5yEh6i2C5y6Xt8oVnSkDrmoV','W7NdVSoHW74','W5hdHapdNSka','bx/dSuhdLq','W6L7WO9evWdcIcivWOSojrzyW5WyfSkIW7vMW4VdKSkjWOZcLCodcHBcImoEwCkEo8oAmuK/W4GsW5ldT8okbG56WOSKWPbff1xdVtG','8lowMbm','W7quzWm','FrLGwSkxba','zZPzC8k3','WPFcKvZcQvO','W53cT8kM','lmkbxXldPq','amkyrbxdHW','WO85W4u','uSoxWOG','udNdM8oaW47cSCoH','f8ofW6RcLW','WOFcLLNcPNi','8ycxIJK','dmkoW5RdN3pcIHVcKrVdRmkvW6ZcLq','8jc4K8op','joIVQ+AYK+MeM+E8IowmMoAwJ+MxS+ITH++9JoISOEIcIoEYU+w+PUwnOUIdUoI+RoIIU+wpIoMNQ+++GGdcKmk4yvpcVSoCdHddHmkaW54cua','W6tdRSoLmKldI8k0WOy9DW','eHldVmoxfa','W5pcQSk0WQBcOq','WP/OR6xMSRZLPPhOT4lVVkNdTCkwW6VcKa4DW69qeI/dQmkcW79X','zCohW67dQKy','WOXnWPZcT0i','ifFdOH/dJa','hEIUQ+AZQUMhVUE/GEwmLoAxToMvIUIVQ++8J+IUOUIbHoEXP+w9UUwnN+IbMUI/VEIGSownI+MNHo++TCkHW6zwt8kauSo+wdhdVgxcGMJcVq','jW3dSSolWOhdKf4','W7JcUSo7ymkBWRT1W64','W6ddKKiCpW','EZSh','F8oEWOhcKsi','WRyTWO8WWR8','roIUPUAZRowMH+I1Uo+/TuZcNoIIREMyVowiU++9SdRcQ8kXlr55C1/cQIxdRmoYcJK','W58nia','cmk8zrRdL8ke','5PsR5zkh5BMS5PE95OYD','W7lcNHJdLW','rCkAW5/cQfa','W7xcS8k/CImIWQD2WPFcRSkmW6zaW5qSW7pcOvtdVq','xuRdOSoSWOpdIv7cR8k4WP3cI8oeF8kJxGRdVbdcVmk+WPJcHvC','WQVdU8o6','E33cM8klzga'],...(function(){return[...['vCkbfmkaw1C','WQRdSCoUELJdKLO','dsxdI8oB','h8knWOSH','aGaWWRxdMq','WR7dHCoKwNu','zsmvax/dNM8','lSogW7ddIWS','W5DkWOzQW5RdVHFcSJPLW7tdJua','W5NcP8oQASkP','lCo7W4VdSrC','p1/dHhFdOtZdGa','WRBLKjhLUyyFF3VdVh3cH8o3WP/cSGq','WRFcSKm','mCoVW5FcPZVdRSka','WQ59W4KmW6m','WOXjFSkDkwxcOSkFWO3cG1NcTa','bIhdISoxhG','W68vBcT5WPm','zGVcHJlcSMVdSuBcIaVcM8kt','wwZcK8klymoeomoXo1e','WRxcQCkZAW','n8o/W4RcQW','8jk3ISkt','W7emWPfkWRddLhuVwa','ywC/W616','cXiq','WRhcUmkLDxVdJCkR','WQhdVCoZAfxdMuy','4P22rEA6KUEROUI3H+ElJoI9I+AkKowjTq','qSoOW5b+W59KFSoZ5RIf56Mt5A6m5lI1z8kXWRxOT63LJyBVVOtLPktKU7RNL7HFpmks6zQq5B6j','W5BdPmoNW695','5lIB5zw/5zow','WQJdPCojWP4p','i8kqqcFdOq','4P+xW4RMUBJNQ4dOTlVNIAVOVzdLPRROTlS','W6tcHSk0','rZtcHCo7W47cUmo3FKDnBMhcOuVcON9CfmkRbmoCWP3dTWH8WQehW7WaiCkXm8oklCo4WRzzWP7cNJtcMwdcNtpcLa','eSkdWR3dJ8oz','WR7cMLpcVNO','cd7dIq','o8katG','gaDyWOWfWOldPqW3WOpcTGVdQWOtz8kFsCk2W5RcPSk0pmoYWO7cG8kserfjiCoRWPNdING1WRlcPmolnhOFDmk0WO4DWR3cTmoscSk3AuO','WOdcTsDS','hmkbrIe','WRlcTmk1BvtdI8kJWRu','W47cPSktWOtcS8kJW6O','WPm5W5eD','vNVcMZ0r','it/dS8oAWP0','vwtcQaem','W5NINRZcKq','WOxcRIu','WQu8WRldJJe','z8kKW5dcKum','WOhcLgJcNa','mSkBWQe','pmkDCqvY','BmkXm8kJ','x1LuWR1jpqVdNW','4P+VW6pMU6xNQO3OT7/NIQ3OV6NLPzFOTR4','W7FcR8keW4xcSq','aWRdNSoaWRO','W4VdJSoC','WOZLKABLUlZdUga7W7ZcKSkxW5W7','W4dcOSksWOpcM8kQW6Kj','4P2ipoAFU+IcQ+ASHEEITowNU+EtRmki','b8kdCtvz','W6CaWP7cQwVdUW/cPq','iCoLW6NdNa','n8oLW7dcMWq','W4pdNSoCW7XJpSoI','W5tdK8oqW4j3j8o9W4RdKSkAyZWSimoHWRZdKWXGWOvYW7BcHSoFDSkNy8oYWOn0cunZE8kdW6hcJCkfWORdTG','WPFdM8oO','W7FcJXpdNwjQ','ESo9W5DfWR4','WO8hW5e3','W57dSWBdGCkp','ye8fW41jW4ZcRq','WRZcLaTf','WP/cSSk4CN/dHmk6W707FX7cJq','tCkmeCklra','W7RcS8k1','W6hcVCk7ka','eatdPCoSWRJdGeddR8kCWP0','WQJcLK3dHIn+b8o3kSorW4K','WQ3dNeVcJa','W6/dOGpdNCkn','bwxdQdtdGdZdSW','W5VdT3C4uCkCW4mrW4FdKZBcJXG','u+ApGownTowrLEw5VUAxLEAnG+ILO+ADUUwNIEI3JmkBmW','F0adW6LH','CNNcVZijWQJcJa','WRCNW7ayfW','F8k/WOVdTglcQSkPWQbwW6fGAa','W7FcQ8kfWQtcUCkXW7W','abGd','mmkquthdTG','BNVcHmkCD8otl+w/JowNJEobVos6OEs5PoI1JUwmUq','WQ7dNXFdR1rpt8oT','jchdR3y','W6VcOsVdLhO','pmoOW7tdTXu','W5n9WPK','W7/cP8kUpwhdLevzaaC','W4/cPSkoWPdcPSkS','WRK/WPBdIb3dQq'],...(function(){return['W4/cK8k6WP7cOG','xowqO+w5MmoQW5hdVmoDtX8keW','q1hcRSkVW5VcKG','WR3cQc9KdCoDWOn7W6FdGYpcRtBcMZK5uq3cLaRcIZXXWPvQW7m','W73cU8o/','W5XZWOZdLmkUt8obWPW','WOaAW4W','W4VWKjgcwUI9KoIIQoE6LUAEG2i','WQXtW5tcVmk7hSk+W5e','rwrhWOvl','W5ZdKfq','vConWQNcRWC','4P6qW73MN7ZNN6pOR63MS6JdRG','W5ztWPldJCk2','W5iizdTg','jf/dMwddRYNdLG','nHpdTSovmG','n1tdGq','f8kYFIJdLSkfyG','W7JcIW/dJLvQu8oODCoSWPFdNG','W4hcRmkeWO4','c8kaW5JdLhJcIXNcQtldImklW43cIa','WRfjW5is','W5xdKuu','xbTCv8kl','iCoNW6/dIXS','W5lcUCkZW5VcQLNcLmkYe8k5','WPNcOdbYbW','WPvpW5y','AUISR+AYGoMeQoE/UEwnJUAwSEMwGEIUGU+9UoITP+IbOoEYRow/MUwpJEIaIoI/U+IIJEwoOUMKJU+8G2hdI8kwbNVcISowjcucx0ZdISog','EHz+wG','DmoSW5X9WOW','WO/cGMVdVmo1Eq','W7JcUSoRACkCWQS','W6VdSSkaqSkkW6C','b8ovW4BcLN/cHmowla','WQtdTCoVFxRdNvPSotFcKqO','W67dO8klsmkQW7BcMWi','toIUGoAWPUwqKow4Vmk3','WQBcINJcKfC','emkbWQVdRComW6O','hmkBrYLS','BmolW7ldRgy','x1LtWRre','eCklWR/dM8oFW7/dGq','F8o1W43dLe1pW7aa','FNZcJW','WOSwW4CPWOpcQei','WRC+W4C6evJdLG','WRanWQSr','8ywhPMi','W7/dSX3dGmkWgSkzqG','WPxcMLtcJhG','p8k2WReaW6pdJ8kUW7CghCo1','WRhcRZ8','W7SjEG','CbH9wG','W6RdTWhdKmkwbSkm','5ywp5Qg457En5yUw','8yI1I8oM','5O6856wn57Q35P6cWPxcQSoRw8kLnmotW5uciG','5lQX5zEm5zg4','W6PHWPVdKSkPqmokWPy','qmoXW58gW6i','W5BcS8kTW6BcUG','emklWQldJ8okW7a','WRhcRSkX','ECosW4mLW60','WPBdKCo6wfe','bg/dVa','AttdJCoGW4tcO8o3','WRtcTd1WfG','bCkCDX1N','vCklhq','FbxdNwddGZtdIKJcPaC','WPBdTSkkWQlcKmkjW7ya','i8k2WReaW6xdUa','tCoWW5m','5yET5Qgs57wn5yQe','WRxcVM7cNvG','oSkYsZ1g','ltaxWR7dHa','W7NcOmoSFmkDW6u/WRj+mSo2W4O/ECorWR9aemkcW5tcShhcJ1BdIu7cRmokbuvcC3lcVceAo8kqqSkXW61wjCklBmkMFZqfBHnXyCkvW4lcQG','W7VcP8oYzCkpWRj5WRn8lCoYW4OKya','zCoJW53dGey','W4RcRCkdWPVcP8kGW6Ov','WRtcTd1W','W4FcTSkqlxW','W5zMWPVdJq','W6qmW57dIJhcN3NcPNClfW1Y','Du8bW6XnW5ZcU0b9W4S','bW4bW6zkhIpdQ3RdHq','ruDBWRHi','F08gW5jjW4JcRq','a8k8qd5z','xgBcHq','WOWPWRmTWR4','rCkcW4hcTNlcSW','iXndWPzEW6JcHwziW5q','W7JcOmo9yCkD','eSk8zrNdJmkEDq','8y2ROCoy','WRVdVSkYjSoeW7uA','W7BcSCoSx8khWRH+','W4/cRmkh'];}())];}())];}());Iii11l=function(){return lill11;};return Iii11l();};async function iiiliI(i1i11i){const II11il=iIIilI,II11l1={'GvDeP':function(I1l11I,Ilil1l){return I1l11I(Ilil1l);},'ZuwJA':II11il(0x1d9,']UCi'),'YKkiD':II11il(0x115,'jC4h'),'hAIDM':'清空购物车失败','thklk':II11il(0x129,'0A47'),'HXToF':II11il(0x148,'jC4h'),'monfv':'39.786221','HlOhn':II11il(0x15f,'KCxY'),'nmqgg':II11il(0x1fa,'7GUh'),'wjTaF':'000000000','sMJLR':II11il(0x226,']UCi'),'IhRIf':II11il(0x170,'jC4h'),'piTQs':II11il(0x146,'KCxY'),'vIcrM':II11il(0x1af,'^zu0'),'Baiuv':'application/json,\x20text/plain,\x20*/*','XsyVN':II11il(0x1f2,'^zu0'),'AXrFA':II11il(0x117,'E@eT'),'gklIB':'keep-alive','xPHrj':'empty','QxyWj':II11il(0x1d2,'j^r5'),'qenYE':II11il(0x22b,'*&A@'),'MTKQQ':function(iIIiii,iilll){return iIIiii>iilll;},'kIfRs':function(il1iI1,IlllIi,iIIiil){return il1iI1(IlllIi,iIIiil);},'uyZQl':function(i1l1Ii,I1iIIi){return i1l1Ii===I1iIIi;},'vcSpr':II11il(0x160,'BXXO'),'MVljy':'GHayD','LpVcM':'dBzgA','XOWHg':function(I1iIIl,lI1IIl){return I1iIIl===lI1IIl;},'XeFSp':'4|2|1|0|5|3','ytpYi':function(i1ilI,iii1lI){return i1ilI||iii1lI;},'ZKMGv':function(i1ilI1,Iiilii){return i1ilI1||Iiilii;},'OhfUQ':II11il(0x11c,'ABqo'),'fMJHd':'NzEPI','iAlmQ':'smzcU','rvATK':'无响应数据','QEgQh':function(Iil1li,Iiilil){return Iil1li>=Iiilil;},'kuFIG':function(Iil1ll,iillI){return Iil1ll!==iillI;},'XYtcU':'cZfQz','BVaub':II11il(0x1ce,'mn7$')};if($[II11il(0x104,'#I#r')]||$[II11il(0x1fb,'#y0T')])return;let Iil1lI='',IiiliI='',iii1iI=II11l1[II11il(0x143,'2QS1')],llIll={};switch(i1i11i){case II11il(0x181,'Sc)U'):Iil1lI='https://api.m.jd.com/client.action?functionId=cartCheckAll',llIll={'euCountry':![],'tabMenuValue':'','cartuuid':$[II11il(0x141,'BXXO')],'filterTag':II11l1[II11il(0x20c,'eXy5')],'latitude':II11l1[II11il(0x1f5,'AzS]')],'userType':'1','noResponse':![],'operations':[{'carttype':'7'}],'updateTag':![],'hasSearchParam':![],'openudid':$[II11il(0xf5,'$kCE')],'cvhv':II11l1[II11il(0x175,'XoR3')],'longitude':II11l1[II11il(0x118,'aiZf')],'homeWishListUserFlag':'3','addressId':II11l1['wjTaF'],'hitNewUIStatus':'1','syntype':'1','configVersion':II11l1[II11il(0x10b,'ABqo')],'degradation':0x0,'page':0x1,'adid':''},IiiliI=await i11iii[II11il(0x1cf,'mn7$')](II11l1[II11il(0x12b,'0NVj')],llIll);break;case II11l1[II11il(0x1a5,'0NVj')]:Iil1lI=II11l1[II11il(0x1bb,'0NVj')],llIll={'euCountry':![],'tabMenuValue':'','cartuuid':$[II11il(0x202,')Mrn')],'filterTag':II11l1[II11il(0x158,'SP3Y')],'latitude':II11l1['monfv'],'userType':'1','noResponse':![],'operations':[{'TheSkus':$[II11il(0x1e9,'73[f')]}],'updateTag':![],'hasSearchParam':![],'openudid':$[II11il(0x137,'SP3Y')],'cvhv':II11l1['HlOhn'],'longitude':II11l1['nmqgg'],'homeWishListUserFlag':'3','addressId':II11il(0x10a,'ojx*'),'hitNewUIStatus':'1','syntype':'1','configVersion':II11l1[II11il(0x209,'XoR3')],'degradation':0x0,'page':0x1,'adid':''},IiiliI=await i11iii[II11il(0x1c4,'^zu0')](II11l1[II11il(0x219,'%lP]')],llIll);break;default:console['log'](II11il(0x169,'!F($')+i1i11i);return;}const il1iII={'url':Iil1lI,'headers':{'Accept':II11l1[II11il(0x13f,'#y0T')],'Accept-Encoding':II11l1['XsyVN'],'Accept-Language':II11l1[II11il(0x1e8,'e75h')],'Connection':II11l1[II11il(0x19d,'pT2o')],'Content-Type':'application/x-www-form-urlencoded','Cookie':li1i1l,'Host':II11il(0x102,']UCi'),'Origin':'https://api.m.jd.com','Sec-Fetch-Dest':II11l1['xPHrj'],'Sec-Fetch-Mode':II11l1[II11il(0x124,'7g7*')],'Sec-Fetch-Site':'same-origin','User-Agent':$['UA'],'x-referer-package':II11l1[II11il(0x1dc,'^zu0')]},'body':IiiliI,'timeout':0x7530};iii1iI===II11il(0x116,'%lP]')&&(delete il1iII[II11il(0x171,'%lP]')],delete il1iII['headers'][II11il(0x142,'!F($')]);const iilli=0x1;let IlllIl=0x0,II11lI=null,lI1IIi=![];while(IlllIl<iilli){II11l1[II11il(0x1d7,'j^r5')](IlllIl,0x0)&&await $['wait'](0x3e8);const {err:lI1III,res:IIliIi,data:IllIiI}=await II11l1[II11il(0x1f3,'KlHN')](li1i1I,il1iII,iii1iI);if(lI1III){if(II11l1['uyZQl'](typeof lI1III,'string')&&lI1III[II11il(0x12d,'JVOL')](II11l1['vcSpr']))II11lI=i1i11i+'\x20请求超时，请检查网络重试';else{const i1il1=IIliIi?.['statusCode'];if(i1il1){if(II11l1['uyZQl'](II11l1[II11il(0x203,'#y0T')],II11il(0x1e2,'7SoP'))){if([0x193,0x1ed]['includes'](i1il1))II11lI=i1i11i+II11il(0x225,'ssOw')+i1il1+'）',lI1IIi=!![];else{if([0x190,0x194][II11il(0x1e7,']UCi')](i1il1)){if(II11l1[II11il(0x1e0,'aiZf')](II11il(0x157,'jC4h'),II11l1['LpVcM'])){i1illI[II11il(0x11a,'ssOw')](i1IIl['msg']),I1lll1['message'][II11il(0xff,'0A47')](i1IIi[II11il(0x19f,'!F($')]);return;}else II11lI=i1i11i+II11il(0x21e,'E@eT')+i1il1+'）';}else II11lI=i1i11i+II11il(0x21a,'bixr')+i1il1+'）';}}else{if([0x193,0x1ed][II11il(0x220,'^zu0')](IiiIlI))I1l1Ii=I1i11i+'\x20请求失败，IP被限制（Response\x20code\x20'+I1i11l+'）',llIlii=!![];else[0x190,0x194][II11il(0x1b2,'%lP]')](Illl1i)?llIlil=IIlil+II11il(0x17a,'$kCE')+ilI1lI+'）':IiiIll=IIlii+'\x20请求失败（Response\x20code\x20'+IlI1il+'）';}}else{if(II11l1[II11il(0x1e6,'j^r5')](II11il(0x1ac,'0A47'),'deUUA'))II11lI=i1i11i+II11il(0x1fe,'!F($')+(lI1III['message']||lI1III);else{const liiI11={'Dbmcw':function(ililI1,IIii1i){const iIIil1=II11il;return II11l1[iIIil1(0x1e3,'$V)m')](ililI1,IIii1i);}};return new IiII(async i1ili=>{illIlI['post'](liIiI,(Iiill1,I1iII1,lilII1)=>{liiI11['Dbmcw'](i1ili,{'err':Iiill1,'res':I1iII1,'data':lilII1});});});}}}IlllIl++;}else{const iill1=i11iii[II11il(0x1ca,'UMf6')](IIliIi),iii1l1=![];if(iii1l1){const IIliIl=II11l1['XeFSp']['split']('|');let II11ll=0x0;while(!![]){switch(IIliIl[II11ll++]){case'0':console[II11il(0x20b,'pT2o')](II11il(0x213,'mn7$')+i1i11i+'\x20请求参数');continue;case'1':console[II11il(0x1f6,'JzO6')]('🔧\x20'+i1i11i+II11il(0x1eb,'KCxY')+II11l1['ytpYi'](iill1,'无')+'\x0a');continue;case'2':console[II11il(0x144,'*&A@')](II11il(0x18f,'BXXO')+i1i11i+II11il(0x132,')Mrn')+II11l1['ZKMGv'](IllIiI,'无')+'\x0a');continue;case'3':console[II11il(0x20b,'pT2o')](II11l1[II11il(0x16b,'#I#r')]);continue;case'4':console[II11il(0x1ed,'JVOL')](II11l1[II11il(0x1c9,'7g7*')]);continue;case'5':console[II11il(0x13b,'UMf6')](il1iII);continue;}break;}}try{const liiI1I=JSON[II11il(0x178,'BXXO')](IllIiI);iil1lI(i1i11i,liiI1I);break;}catch(ililII){II11l1['fMJHd']!==II11l1[II11il(0x16a,'bixr')]?(II11lI='❌\x20'+i1i11i+'\x20接口响应数据解析失败:\x20'+ililII[II11il(0x1ba,'ABqo')],console[II11il(0x20e,'IlzG')](II11il(0x1c2,'woyd')+i1i11i+II11il(0x156,'7g7*')+String(IllIiI||II11l1[II11il(0x1f1,'KCxY')])),IlllIl++):(delete IliilI['body'],delete i1II1['headers'][II11l1[II11il(0x21c,'AzS]')]]);}lI1IIi=![];}}II11l1[II11il(0x1a1,'Sc)U')](IlllIl,iilli)&&(console['log'](II11lI),lI1IIi&&(II11l1[II11il(0x168,'7SoP')](II11l1['XYtcU'],II11l1['XYtcU'])?(I1llil['log'](II11l1[II11il(0xfc,'SP3Y')]),I1llii[II11il(0x14a,'$V)m')][II11il(0x17e,'^zu0')](II11l1[II11il(0x224,'ns!A')])):($['outFlag']=!![],$[II11il(0x189,'aiZf')]&&('pGSRD'===II11l1['BVaub']?$['message'][II11il(0x1aa,'KlHN')](II11lI):i1il?.[II11il(0x11e,'0NVj')]?.[II11il(0x11b,'0NVj')]&&lI1Il1?.[II11il(0xf4,'ssOw')]?.['skuUuid']&&lilIi1?.[II11il(0x1fd,'7SoP')]?.['Id']&&li1II[II11il(0x151,'%lP]')]['push']({'num':IliI11[II11il(0x13e,'e75h')]['Num'],'skuUuid':i1ll[II11il(0x11e,'0NVj')][II11il(0xf8,'7GUh')],'useUuid':![],'Id':i1l1lI[II11il(0x229,'jC4h')]['Id']})))));}async function li1i1I(IllIi1,lilIII=iIIilI(0x211,'Ra@B')){const IlllII=iIIilI,Ii1ilI={'RBXco':function(II11i1,iliIil){return II11i1(iliIil);},'TIZLU':function(iliIii,lill1i){return iliIii===lill1i;},'QFwLu':'POST','EpJhh':IlllII(0x116,'%lP]'),'wQCXN':function(il1li,iIIill){return il1li===iIIill;},'fNyEj':IlllII(0x1ec,'A*5C'),'RZdBw':'不支持的请求方法'};if(Ii1ilI[IlllII(0x153,'eXy5')](lilIII,Ii1ilI[IlllII(0x1db,')Mrn')]))return new Promise(async iilii=>{const I1il1I=IlllII;$[I1il1I(0x121,'IlzG')](IllIi1,(Ill11i,iilil,Ill11l)=>{const II111=I1il1I;Ii1ilI[II111(0x16d,'ssOw')](iilii,{'err':Ill11i,'res':iilil,'data':Ill11l});});});else{if(lilIII===Ii1ilI[IlllII(0x1fc,'ssOw')])return new Promise(async il1ll=>{const lI1l1I=IlllII;$[lI1l1I(0x10c,'3$[Z')](IllIi1,(i1ilIi,lill1l,l1l1i1)=>{il1ll({'err':i1ilIi,'res':lill1l,'data':l1l1i1});});});else{if(Ii1ilI[IlllII(0x184,'0A47')](IlllII(0x127,'woyd'),Ii1ilI[IlllII(0x1cb,'0RQQ')])){if(i1l1li?.['cartInfo']?.[IlllII(0x16c,'@Qyj')]&&i1ilii?.['cartInfo']?.[IlllII(0x196,'#y0T')]?.['length']>0x0)for(const i1ilIl of i1ilil[IlllII(0x133,'%lP]')][IlllII(0x100,'Ra@B')]){i1ill1(i1ilIl[IlllII(0x17d,'mn7$')]);}}else{const llI11I=Ii1ilI[IlllII(0x123,'KCxY')];return{'err':llI11I,'res':null,'data':null};}}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
